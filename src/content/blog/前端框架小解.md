---
author: Hello
categories: å‰ç«¯
title: å‰ç«¯æ¡†æ¶å°è§£
description: 'å‰ç«¯æ¡†æ¶ç›¸å…³'
---


## å‰ç«¯æ¡†æ¶æµè¡Œç¨‹åº¦

[å…·ä½“æŸ¥è¯¢ç½‘å€](https://npm-stat.com/charts.html?package=react&from=2023-01-01&to=2023-10-10)

| æ¡†æ¶     | npmä¸‹è½½é‡ï¼ˆ *2023-01-01* and *2023-10-10*ï¼‰ |
| -------- | ------------------------------------------- |
| react    | 788,921,076                                 |
| vue      | 153,082,192                                 |
| Angular  | 20,187,119                                  |
| svelte   | 32,586,777                                  |
| solid-js | 3,752,099                                   |

[æµè¡Œåº¦è°ƒç ”](https://2022.stateofjs.com/zh-Hans/libraries/front-end-frameworks/)

![](/å‰ç«¯æ¡†æ¶å°è§£/jie9.png)



## React

è¯¦æƒ…å¯ä»¥æŸ¥çœ‹æœ¬åšå®¢ä¸­çš„

ã€ŠReactã€‹(ä¸Š)ã€(ä¸­)ã€(ä¸‹)

ã€ŠReact æ‹“å±•ã€‹

ã€ŠReact Hookè§£æã€‹

ã€ŠReact Fiberã€‹

Infernoä½œè€…å¯¹Reactè¯„ä»·ï¼š

> æˆ‘è®¤ä¸º React å·²ç»æ”¹å˜äº† Web UI ç¤¾åŒºçš„æ¸¸æˆè§„åˆ™ã€‚å®ƒæ‘’å¼ƒäº†æˆ‘ä»¬åœ¨æœåŠ¡å™¨ä¸Šï¼ˆä¾‹å¦‚ MVCï¼‰å¤šå¹´æ¥ä¸€ç›´åœ¨åšäº‹çš„æ—§æ–¹æ³•ï¼Œå¹¶æä¾›äº†ä¸€ç§æ¿€å‘è®¸å¤šä¸åŒæ¨¡å¼å’Œè®¾è®¡è®¨è®ºçš„æ–¹æ³•;ä¾‹å¦‚ï¼Œå•å‘æ•°æ®æµã€æ¨¡æ¿ä¸Šçš„ç»„ä»¶ã€JSXã€è™šæ‹Ÿ DOMã€‚



## Svelte

**Rich Harris** æ˜¯Svelteçš„ä½œè€…ï¼Œä¹Ÿæ˜¯rollupçš„ä½œè€…ï¼Œä»–æŠŠrollupå…³äºä»£ç æ‰“åŒ…ç­–ç•¥çš„é€ è¯£

[Svelte](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fsveltejs%2Fsvelte) é‡‡å–äº†ç‹¬ç‰¹çš„æ–¹æ³•ã€‚å®ƒåœ¨æ„å»ºæ—¶ç¼–è¯‘æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥äº¤ä»˜æœ€è½»é‡çº§çš„ä»£ç 

Svelteä¸éœ€åœ¨è¿è¡Œæ—¶è§£é‡Šåº”ç”¨ç¨‹åºä»£ç ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºåœ¨æ„å»ºæ—¶è¢«è½¬æ¢æˆç†æƒ³çš„JavaScriptã€‚

ï¼ˆé€šè¿‡é™æ€ç¼–è¯‘å‡å°‘æ¡†æ¶è¿è¡Œæ—¶çš„ä»£ç é‡ï¼Œå¹¶ä¸”ç›´æ¥è½¬è¯‘ä¸ºé«˜æ•ˆçš„å‘½ä»¤å¼ä»£ç ï¼‰



è¿™æ„å‘³ç€ä½ ä¸éœ€è¦æ”¯ä»˜æ¡†æ¶æŠ½è±¡çš„æ€§èƒ½æˆæœ¬ï¼Œæˆ–è€…å½“ä½ çš„åº”ç”¨ç¨‹åºç¬¬ä¸€æ¬¡åŠ è½½æ—¶ï¼Œå—åˆ°æƒ©ç½šã€‚

åŸºäºç¼–è¯‘çš„å“åº”å¼ç³»ç»Ÿï¼š

- Svelte
- Vue Reactivity Transform
- solid-babels

è¯´ä»¥ä¸Šæ˜¯çœŸæ­£çš„å“åº”å¼ï¼Œæ˜¯å› ä¸ºæ¯”å¦‚è¯´Reactï¼Œå®é™…ä¸Šæ˜¯æ ¹æ®çŠ¶æ€å˜åŒ–ï¼Œæ›´æ”¹è™šæ‹Ÿdomï¼Œé‡æ–°renderï¼ˆæœ‰å¯èƒ½æ˜¯çˆ¶ç»„ä»¶æ›´æ–°ï¼‰ï¼Œå¯¹æ¯”èµ·æ¥solidjsã€svelteå“åº”å•ç‹¬é’ˆå¯¹çš„æ˜¯æ•°æ®ç²’åº¦ï¼ŒReactå“åº”çš„ä½“é‡æ˜¯ç»„ä»¶ç²’åº¦



å…³äºsvelteçš„å“åº”å¼ç³»ç»Ÿï¼šhttps://svelte.dev/blog/svelte-3-rethinking-reactivity

- åŸºäºååº”å¼ç»†ç²’åº¦å˜åŒ–ä¼ æ’­
- bundleå¤Ÿå°
- æ— è™šæ‹Ÿdom
- è¯­æ³•ç®€æ´



#### è¯­æ³•ï¼ˆSvelte3ï¼‰

ä½¿ç”¨ `xx.svelte` æ–‡ä»¶ï¼Œåœ¨vscodeä¸Šè£…å¥½æ‹“å±•ç¨‹åº

```js
<script>
  //çŠ¶æ€
  export let title;
	let count = 0;

  // è¿™å°†åœ¨â€œtitleâ€çš„propå±æ€§æ›´æ”¹æ—¶
  // æ›´æ–°â€œdocument.titleâ€
  $: document.title = title;

  //å‰¯ä½œç”¨
  $: {
    console.log(`multiple statements can be combined`);
    console.log(`the current title is ${title}`);
  }

  //çŠ¶æ€æ›´æ–°
  count++;
</script>
```

å¯ä»¥çœ‹åˆ°ä»£ç æ˜¯å¦‚æ­¤ç®€æ´



ä½†æ˜¯Svelteç®€æ´çš„ä»£ä»·åœ¨

- åªèƒ½åœ¨Svelteç»„ä»¶å†…ä½¿ç”¨
- ç»„ä»¶å¤–éœ€è¦ä¸åŒAPI
- åªèƒ½åœ¨é¡¶å±‚ä½œç”¨äºä½¿ç”¨ï¼Œä¸å¯ä»¥åœ¨å‡½æ•°ä½“ä¸­ä½¿ç”¨



Svelte3 ç»„ä»¶ç¼–è¯‘é€»è¾‘ä¹Ÿæ˜¯React hookså¯å‘è€Œæ¥çš„ï¼ˆä½œè€…æœ¬äººè¯´çš„ï¼‰ï¼Œå› ä¸ºä»–ä»¬è®¤ä¸ºè¿™ä¸æ˜¯ä»–ä»¬æƒ³è¦å‘å±•çš„é€»è¾‘

> That all changed with the advent of [hooks](https://reactjs.org/docs/hooks-intro.html), which handle state in a very different fashion. Many frameworks started experimenting with their own implementations of hooks, but we quickly concluded it wasn't a direction we wanted to go in. Hooks have some intriguing properties, but they also involve some unnatural code and create unnecessary work for the garbage collector. For a framework that's used in [embedded devices](https://mobile.twitter.com/sveltejs/status/1088500539640418304) as well as animation-heavy interactives, that's no good.
>
> è¿™ä¸€åˆ‡éƒ½éšç€é’©å­çš„å‡ºç°è€Œæ”¹å˜ï¼Œé’©å­ä»¥éå¸¸ä¸åŒçš„æ–¹å¼å¤„ç†çŠ¶æ€ã€‚è®¸å¤šæ¡†æ¶å¼€å§‹å°è¯•è‡ªå·±çš„é’©å­å®ç°ï¼Œä½†æˆ‘ä»¬å¾ˆå¿«å¾—å‡ºç»“è®ºï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ–¹å‘ã€‚é’©å­æœ‰ä¸€äº›æœ‰è¶£çš„å±æ€§ï¼Œä½†å®ƒä»¬ä¹Ÿæ¶‰åŠä¸€äº›ä¸è‡ªç„¶çš„ä»£ç ï¼Œå¹¶ä¸ºåƒåœ¾å›æ”¶å™¨åˆ›é€ äº†ä¸å¿…è¦çš„å·¥ä½œã€‚å¯¹äºç”¨äºåµŒå…¥å¼è®¾å¤‡ä»¥åŠåŠ¨ç”»å¯†é›†å‹äº¤äº’çš„æ¡†æ¶ï¼Œè¿™æ˜¯ä¸å¥½çš„ã€‚
>
> So we took a step back and asked ourselves what kind of API would work for us... and realised that the best API is no API at all. We can just *use the language*. Updating some `count` value â€” and all the things that depend on it â€” should be as simple as this:
>
> æ‰€ä»¥æˆ‘ä»¬é€€åä¸€æ­¥ï¼Œé—®è‡ªå·±ä»€ä¹ˆæ ·çš„ API å¯¹æˆ‘ä»¬æœ‰ç”¨......å¹¶æ„è¯†åˆ°æœ€å¥½çš„ API æ ¹æœ¬ä¸æ˜¯ APIã€‚æˆ‘ä»¬å¯ä»¥åªä½¿ç”¨è¯­è¨€ã€‚æ›´æ–°ä¸€äº› `count` å€¼ - ä»¥åŠä¾èµ–äºå®ƒçš„æ‰€æœ‰äº‹æƒ… - åº”è¯¥åƒè¿™æ ·ç®€å•ï¼š
>
> ```
> count += 1;
> ```
>
> Since we're a compiler, we can do that by instrumenting assignments behind the scenes:
> ç”±äºæˆ‘ä»¬æ˜¯ç¼–è¯‘å™¨ï¼Œå› æ­¤å¯ä»¥é€šè¿‡åœ¨åå°æ£€æµ‹èµ‹å€¼æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š
>
> ```
> count += 1;
> $$invalidate('count', count); //const $$invalidate: (name: string, value: number) => undefined
> ```
>
> Importantly, we can do all this without the overhead and complexity of using proxies or accessors. It's just a variable.
> é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å®Œæˆæ‰€æœ‰è¿™äº›å·¥ä½œï¼Œè€Œæ— éœ€ä½¿ç”¨ä»£ç†æˆ–è®¿é—®å™¨çš„å¼€é”€å’Œå¤æ‚æ€§ã€‚å®ƒåªæ˜¯ä¸€ä¸ªå˜é‡ã€‚

![image-20231024095501111](/å‰ç«¯æ¡†æ¶å°è§£/jie16.png)

é¢„ç¼–è¯‘å

![1111](/å‰ç«¯æ¡†æ¶å°è§£/jie17.png)



#### solidjsçš„ä½œè€…è¯„ä»·

å®ƒç¡®å®ç²¾ç®€äº†å®ç°ä»£ç ï¼Œä½†æ€§èƒ½æ”¹è¿›å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚æˆ‘ç¡®å®ä»å®ç°ä¸­æ•²æ‰äº†å¦ä¸€åƒå­—èŠ‚ï¼Œå› æ­¤å®ƒç¡®å®ç¬¦åˆè¿™äº›è¦æ±‚ã€‚è¿™å°±æ˜¯ Svelte 3 åœ¨è¯­æ³•ä¸Šçš„å·¨å¤§å˜åŒ–ï¼Œä½†æœ€ç»ˆæä¾›äº†å‡ºè‰²çš„æ€§èƒ½å’Œæå°çš„æ†ç»‘åŒ…å¤§å°ã€‚è¿™æ„å‘³ç€åœ¨å®è·µä¸­ï¼Œå®ƒé€šå¸¸ä¼šç”Ÿæˆæ¯” Preact æˆ–æ‚¨æœ€å–œæ¬¢çš„â€œä»… 2kbâ€åº“æ›´å°çš„æ†ç»‘åŒ…ï¼Œå¹¶ä¸”å¯èƒ½æ€§èƒ½ä¸ä½³ã€‚



#### Vueä½œè€…è¯„ä»·

![image-20231024105011819](/å‰ç«¯æ¡†æ¶å°è§£/jie18.png)



[çŸ¥ä¹æŸè¯„ä»·](https://www.zhihu.com/question/459281340/answer/1888214077)



## Solidjs

- > Iâ€™m going to look at each of Richâ€™s claims and contrast each libraryâ€™s approach with hopes of separating the facts from the hyperbole.

æ³¨ï¼š**Rich Harris** æ˜¯Svelteçš„ä½œè€…ï¼Œä¹Ÿæ˜¯rollupçš„ä½œè€…ï¼Œæ‰€ä»¥çœ‹èµ·æ¥solidjsçš„ä½œè€…[Ryan Carniato](https://ryansolid.medium.com/?source=post_page-----cbcba2120cea--------------------------------)åˆè¡·æ˜¯å¾€æŠ›å¼€ç°ä»£æ¡†æ¶ä½“ç³»ï¼Œèµ°ä¸€æ¡ç²¾ç®€çš„ï¼ˆä½“ç§¯æ›´å°ï¼‰ï¼Œå½“ç„¶æ€§èƒ½ä¹Ÿå¾—å¿«çš„å‰ç«¯æ¡†æ¶ä¹‹è·¯



- é¢—ç²’åº¦å“åº”ï¼šSolid å“åº”æ€§åŸç†å¤§è‡´ä¸Šæ˜¯å°†ä»»ä½•å“åº”æ€§è®¡ç®—å°è£…åœ¨å‡½æ•°ä¸­ï¼Œå¹¶åœ¨å…¶ä¾èµ–å…³ç³»æ›´æ–°æ—¶é‡æ–°è¿è¡Œè¯¥å‡½æ•°ï¼›æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°ä»–çš„stateåœ¨å¼•ç”¨æ˜¯é€šè¿‡å‡½æ•°è°ƒç”¨çš„å½¢å¼å¼•ç”¨çš„ã€‚

- ä¸ç”¨åœ¨æ„hooké¡ºåºï¼Œè‡ªåŠ¨ä¾èµ–æ”¶é›†ï¼Œå¹¶ä¸”è‡ªåŠ¨æå‡createSignalåˆ°å½“å‰ä½œç”¨åŸŸçš„æœ€å‰é¢

  
  
  ä»–ä¾èµ–çš„æ˜¯ä¸€ä¸ªä½œè€…è‡ªåˆ›çš„åº“ï¼š[dom-expressions](https://github.com/ryansolid/dom-expressions)ï¼Œ ä¸€ä¸ªæ¸²æŸ“è¿è¡Œæ—¶ï¼Œç”¨äºæ‰§è¡Œç»†ç²’åº¦æ›´æ”¹æ£€æµ‹çš„ååº”å¼åº“ã€‚è¿™äº›åº“ä¾èµ–äºå¯è§‚å¯Ÿé‡å’Œä¿¡å·ç­‰æ¦‚å¿µï¼Œè€Œä¸æ˜¯ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œè™šæ‹Ÿ DOM
  
  æ˜¯ä¹Ÿæ˜¯ä½œè€…ä¸ºæ”¯æŒä»»ä½•ç»†ç²’åº¦ååº”å¼åº“è€Œå¼€å‘çš„  å¼€æºçš„ æ¸²æŸ“å™¨ã€‚
  
  å¹¶ä¸”åæ§½
  
  > æˆ‘åˆ›å»ºäº† [dom-expressions](https://github.com/ryansolid/dom-expressions)ï¼Œå¸Œæœ›è®©äººä»¬èƒ½å¤Ÿé‡‡ç”¨é€šç”¨è¿è¡Œæ—¶ï¼Œå¹¶å¸¦æ¥ä»–ä»¬çš„ååº”å¼åº“å’Œæ„è§ï¼Œä»¥åˆ›å»ºä»–ä»¬å®Œç¾çš„ UI å¼€å‘äººå‘˜ä½“éªŒã€‚é‚£æ˜¯ä¸€ä¸ªå¹¼ç¨šçš„æ¢¦ã€‚äººä»¬æ²¡æœ‰ä½¿ç”¨æˆ‘çš„åº“ï¼Œä»–ä»¬åªæ˜¯æŠ“ä½ä»£ç å°†å…¶åŒ…è£…åˆ°ä»–ä»¬çš„åº“ä¸­ï¼Œå¹¶å¼€å§‹æŒ‰ç…§è‡ªå·±çš„æ–¹å¼è¡Œäº‹ã€‚å…­ä¸ªæœˆå‰ï¼Œæˆ‘ä»æœªæƒ³è¿‡æœ‰äººä¼šä»¥å‰Šå‡å‡ åƒå­—èŠ‚çš„åä¹‰è·å–æˆ‘çš„ä»£ç ï¼Œåˆ›å»ºä¸€ä¸ªä»…æä¾›ç›¸åŒåŠŸèƒ½å­é›†çš„åº“ï¼Œå¹¶åœ¨ Github ä¸Šæ‹¥æœ‰è¿‘ 300 é¢—æ˜Ÿã€‚è¿™å¤ªç¥å¥‡äº†ã€‚è¿™å°±æ˜¯å¼€æºçš„æ„ä¹‰æ‰€åœ¨ã€‚



è¯­æ³•ä¸Šå’Œhooksç›¸ä¼¼ï¼Œå®ç°ä¸Šå’Œvueçš„composition apiæ›´ç›¸ä¼¼ï¼ˆå°¤å¤§è¯´æ˜¯å‡ ä¹ä¸€æ ·çš„ï¼‰ï¼Œæ¯”å¦‚Solidçš„createEffectå¯¹åº”Vueçš„watchEffect

#### è¯­æ³•

```jsx
function App() {
  const [count, setCount] = createSignal(0);
  const [data, { mutate, refetch }] = createResource(fetchData);

  createEffect((prev) => {
    console.log('do something')
  });

  onCleanup(() => {
    if (timer) {
      clearTimeout(timer);
    }
  });

  return (
    <div class="x-three-year" onClick={() => setCount((pre) => pre + 1)}>
      <div class="no-open">ä½ æœ‰ä¸ªè›‹ç³•åº—å¾…å¼€ä¸š</div>
      <div class="no-open">{count()}</div>
    </div>
  );
}
```

å¯ä»¥çœ‹åˆ°å’Œreactæ˜¯ååˆ†ç›¸ä¼¼ï¼Œå®ƒæ—¢ä¿ç•™äº†react classçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ²¿ç”¨äº†react hookçš„useEffectã€useHookå†™æ³•ï¼Œä½†æ˜¯æ¯”å¦‚createEffectå°±æ˜¯ä¼šè‡ªåŠ¨æ”¶é›†ä¾èµ–



#### åˆ—è¡¨æ¸²æŸ“

```jsx
<For each={state.list} fallback={<div>Loading...</div>}>
  {(item) => <div>{item}</div>}
</For>
```

å¦‚ä½•æŒ‡å®šé”®ä½ä¼˜åŒ–domæ“ä½œï¼Ÿ[`How to specify key in <For> each`](https://github.com/solidjs/solid/discussions/366)

![image-20231024113344819](/å‰ç«¯æ¡†æ¶å°è§£/jie20.png)

> Solid's `For` is keyed by default by reference to the data

è·‘ä¸æ‰çš„åˆ—è¡¨diffç®—æ³•

![image-20231024111543530](/å‰ç«¯æ¡†æ¶å°è§£/jie19.png)



å…³äºsolidçš„èŠ‚è¯­ï¼ˆ[SolidJS: The Tesla of JavaScript UI Frameworks?](https://ryansolid.medium.com/solidjs-the-tesla-of-javascript-ui-frameworks-6a1d379bc05e)ï¼‰ï¼š

Leo Horie, author of [Mithril](https://github.com/MithrilJS/mithril.js), to someone on Reddit wanting to get the TL;DR described Solid as:
ã€Šç§˜é“¶ã€‹çš„ä½œè€…Leo Horieå¯¹Redditä¸Šæƒ³è¦è·å¾—TL;DRçš„äººå°†Solidæè¿°ä¸ºï¼š

> Svelte is to Vue as Solid is to React
> Svelte ä¹‹äº Vueï¼Œå°±åƒ Solid ä¹‹äº React ä¸€æ ·

Thatâ€™s a pretty interesting perspective, and one that I find helps a lot of people first encountering Solid. Both Svelte and Solid are compiler driven variants of their counterparts. But what does that actually mean?
è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰è¶£çš„è§‚ç‚¹ï¼Œæˆ‘å‘ç°å®ƒå¸®åŠ©äº†å¾ˆå¤šäººç¬¬ä¸€æ¬¡æ¥è§¦ Solidã€‚Svelteå’ŒSolidéƒ½æ˜¯ç¼–è¯‘å™¨é©±åŠ¨çš„å˜ä½“ã€‚ä½†è¿™å®é™…ä¸Šæ„å‘³ç€ä»€ä¹ˆï¼Ÿ

Iâ€™ve seen it positioned to the difference between being simple and being easy. Solid while being reactive is clearly on the React side of things where Svelte has inherited Vueâ€™s easiness.
æˆ‘å·²ç»çœ‹åˆ°å®ƒå®šä½äºç®€å•å’Œç®€å•ä¹‹é—´çš„åŒºåˆ«ã€‚åœ¨ååº”çš„åŒæ—¶Solidæ˜¾ç„¶æ˜¯åœ¨ React æ–¹é¢ï¼ŒSvelte ç»§æ‰¿äº† Vue çš„æ˜“ç”¨æ€§ã€‚



#### Solidå’Œå…¶ä»–æ¡†æ¶å¯¹æ¯”

Svelte

Svelte å¼€åˆ›äº† Solid åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿé‡‡ç”¨çš„é¢„ç¼–è¯‘æ¶ˆå¤±å‹æ¡†æ¶ã€‚è¿™ä¸¤ä¸ªåº“éƒ½æ˜¯çœŸæ­£çš„å“åº”å¼ï¼Œå¯ä»¥ç”Ÿæˆéå¸¸å°çš„æ‰§è¡Œä»£ç åŒ…ã€‚

åŸæ–‡é“¾æ¥ï¼š[Comparing Svelte and Solid](https://ryansolid.medium.com/javascript-ui-compilers-comparing-svelte-and-solid-cbcba2120cea)

è™½ç„¶ä¸–äººè¯„ä»·Svelte ä¹‹äº Vueï¼Œå°±åƒ Solid ä¹‹äº React ä¸€æ ·ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨[å‰ç«¯æ¡†æ¶ç»“æœå…¬ç¤ºè¡¨](https://krausest.github.io/js-framework-benchmark/current.html)ä¸­çœ‹åˆ°Svelteåªèƒ½æ’ä¸­æ¸¸æ°´å¹³ï¼Œä½†æ˜¯Solidå¯ä»¥æ’åœ¨ä¸Šæ¸¸ï¼ˆå‰åå·¦å³ï¼‰ï¼ŒRyan Carniatoè§£é‡Šå…¶åŸå› åœ¨äº

- ä¼˜åŒ– DOM åˆ—è¡¨å¯¹è´¦

  Svelte ç¡®å®æœ‰ä¸€ä¸ªé”®æ§åˆ—è¡¨åè°ƒå™¨ï¼ˆkeyed list reconcilerï¼‰ï¼Œä½†å®ƒä½¿ç”¨äº†ä¸€ä¸ªæ›´åŸå§‹çš„å®ç°ã€‚Svelteçš„è°ƒå’Œå™¨è¦å°å¾—å¤šï¼Œä½†Solidçš„è°ƒå’Œå™¨è¦å¤æ‚å¾—å¤šã€‚Svelte çš„æ–¹æ³•å¹¶ä¸åƒè®¸å¤šåº“é‚£æ ·å¹¼ç¨šï¼ˆnaviteï¼‰ï¼Œå¯ä»¥æ­£ç¡®å¤„ç†äº¤æ¢è¡Œï¼Œè€Œä¸ä¼šåœ¨ä¸¤è€…ä¹‹é—´ç§»åŠ¨æ¯ä¸€è¡Œï¼Œä½†å®ƒå¹¶æ²¡æœ‰é’ˆå¯¹å•ä¸ªé¡¹ç›®æ›´æ”¹æ“ä½œè¿›è¡Œä¼˜åŒ–ã€‚è¿™æ˜¯å¤„ç†åˆ—è¡¨æ—¶çš„å¤§éƒ¨åˆ†æ€§èƒ½å·®å¼‚ã€‚

- æ¨¡æ¿å…‹éš†

  Solid ä½¿ç”¨ node.cloneNode è€Œä¸æ˜¯ document.createElement æ¥åˆ›å»ºèŠ‚ç‚¹ã€‚è¿™å‡å°‘äº†ä¸´æ—¶å†…å­˜ä½¿ç”¨é‡ã€‚å®ƒç¡®å®éœ€è¦ä½¿ç”¨æ³¨é‡ŠèŠ‚ç‚¹ä½œä¸ºå ä½ç¬¦ï¼Œä½†å¯¹å…¶ä¸­è‡³å°‘æœ‰ 3 ä¸ªèŠ‚ç‚¹çš„é‡å¤åˆ—è¡¨é¡¹çš„æ€»ä½“å½±å“æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚

- Solid åœ¨é©¼å³°å¤§å°å†™äº‹ä»¶å¤„ç†ç¨‹åºä¸Šæ‰§è¡Œéšå¼äº‹ä»¶å§”æ‰˜ï¼ˆ implicit event delegationï¼‰ã€‚

  è¿™æ¯”è®© DOM å¤„ç†æ¯è¡Œæ·»åŠ  2 ä¸ªå¤„ç†ç¨‹åºçš„æ€§èƒ½æ›´é«˜ã€‚æ˜¾ç„¶å¯ä»¥æ‰§è¡Œæ˜¾å¼äº‹ä»¶å§”æ´¾ï¼ˆexplicit event delegationï¼‰ï¼Œä½†å®ƒéœ€è¦æ›´å¤šçš„ä»£ç æ¥æ‰§è¡Œæ˜¾å¼æŸ¥æ‰¾/æ ‘éå†ï¼Œä»¥å°†äº‹ä»¶ç±»å‹å’Œè¡Œæ•°æ®ç»‘å®šåœ¨ä¸€èµ·ã€‚ä»¥å‰ç‰ˆæœ¬çš„ Svelte å®ç°æ²¡æœ‰è¿™æ ·åšï¼Œæ‰€ä»¥æˆ‘æ²¡æœ‰æ·»åŠ å®ƒï¼Œæˆ‘ç›®å‰æ­£åœ¨ç­‰å¾… Svelte ç¤¾åŒºæˆ– Rich æœ¬äººæ¥æƒè¡¡â€œæ€§èƒ½â€ä¸â€œç¼–å†™æ›´å°‘ä»£ç â€çš„ç›¸å¯¹é‡è¦æ€§ã€‚

- åŒæ­¥æ›´æ–°æ‰¹å¤„ç†

  å½“æ‚¨ä¸æ–­ä½¿ç”¨æ›´æ–°æ¥å†²å‡» DOM æ—¶ï¼Œä½¿ç”¨åŠ¨ç”»å¸§ç”šè‡³æ‰¿è¯ºæ¥å»¶è¿Ÿå®ƒä»¬æ˜¯æ€§èƒ½çš„å¿…è¦æ¡ä»¶ã€‚ä½†æ˜¯ï¼Œå¦‚æœåªè¿›è¡Œä¸€ç»„æ›´æ”¹ï¼Œåˆ™å»¶è¿Ÿæ›´æ–°çš„æ—¶é—´å®é™…ä¸Šæ˜¯æœ‰ä»£ä»·çš„ã€‚åº“é€šå¸¸è¦ä¹ˆé€ä¸ªåŒæ­¥è¿è¡Œæ‰€æœ‰æ›´æ–°ï¼Œè¦ä¹ˆåœ¨å»¶è¿Ÿçš„å¾®ä»»åŠ¡ä¸­æ‰¹å¤„ç†å®ƒä»¬ã€‚ä½ çŸ¥é“æ•´ä¸ªçŠ¶æ€åœ¨ React ä¸­çš„ setState è°ƒç”¨åæ²¡æœ‰æ›´æ–°ã€‚Solid ä¸ºæ‰¹å¤„ç†æ“ä½œæä¾›äº†æ˜¾å¼è¯­æ³•ï¼Œå…¶ setState å¸®åŠ©ç¨‹åºå¯ä»¥è·å–åŒæ—¶åº”ç”¨çš„æ‰€æœ‰æ›´æ”¹çš„åˆ—è¡¨ã€‚

- æ˜¾å¼ååº”æ€§å’Œè®¡ç®—

  Svelteçš„ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨è¯†åˆ«æ‚¨ä½•æ—¶è¿æ¥åˆ°å€¼ï¼ˆè¿™ä¸ªå’Œvueä¸€æ ·ï¼‰ï¼Œå¹¶è‡ªåŠ¨è®¾ç½®å¤„ç†å…¶å€¼æ›´æ”¹æ‰€éœ€çš„ä¸€åˆ‡ã€‚ä½†æ˜¯å®ƒå¾ˆéš¾åˆ¤æ–­æ‚¨æ˜¯å¦æ‰“ç®—æ›´æ”¹è¯¥å€¼ã€‚æ­¤å¤–ï¼Œä½¿ç”¨æ™®é€šçš„JavaScriptè¯­æ³•å¾ˆéš¾çŸ¥é“å¤„ç†ååº”åŸå­ï¼ˆ reactive atomï¼‰çš„æ„å›¾æˆ–å®ƒæ‰€æŒæœ‰çš„å€¼ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´åœ¨ç»„ä»¶ç­‰è¾¹ç•Œä¸Šè¿›è¡Œé¢å¤–çš„åŒæ­¥ã€‚Svelte çš„å­˜å‚¨æœºåˆ¶ä½¿ç”¨ä¸åŒçš„è¯­æ³•æ¥å¤„ç†è¿™ä¸ªç¼ºç‚¹ã€‚è®¡ç®—çš„å­˜åœ¨æ˜¯å“åº”å¼åº“æœ€ç¹é‡çš„ä»£ç ä¹‹ä¸€ï¼Œå› æ­¤èƒ½å¤Ÿä¸åŒ…å«å®ƒä»¬çš„åˆ›å»ºä¼šå¤§å¤§é™ä½æ€§èƒ½ã€‚æœ‰æ—¶è‡ªåŠ¨å¹¶ä¸æ˜¯æ›´å¥½ã€‚



å½“ç„¶ä½œè€…è‡ªå·±ä¹Ÿè¯´äº†ï¼šé‰´äº Solid çš„æ€§èƒ½éå¸¸æ¥è¿‘ç—›è‹¦çš„æ‰‹åŠ¨ä¼˜åŒ–çš„ Vanilla JavaScript ï¼ˆåŸç”Ÿjsï¼‰ä»£ç ï¼Œå¯ä»¥è‚¯å®šåœ°è¯´ï¼ŒåŸå§‹æ€§èƒ½ä¸æ˜¯è¿™ç§æ–¹æ³•çš„ç“¶é¢ˆã€‚äº‹å®ä¸Šï¼Œæ€§èƒ½å¯èƒ½æ˜¯é¢„ç¼–è¯‘çš„æœ€å¤§ä¼˜åŠ¿ä¹‹ä¸€ã€‚åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçœ‹åˆ°Svelteæ›´å¥½çš„æ€§èƒ½ã€‚



Vue

Vue çš„ç»†ç²’åº¦ä¾èµ–æ£€æµ‹åªæ˜¯æä¾›ç»™ä¸€ä¸ªç»†ç²’åº¦çš„è™šæ‹Ÿ DOM å’Œç»„ä»¶ç³»ç»Ÿï¼Œè€Œ Solid å°†å…¶ç²’åº¦ä¿æŒåœ¨å®ƒçš„ç›´æ¥ DOM æ›´æ–°ä¸Šã€‚



Knockout

è¿™ä¸ªåº“çš„å­˜åœ¨å½’åŠŸäº Knockoutã€‚å°†å…¶æ¨¡å‹ç°ä»£åŒ–ä»¥è¿›è¡Œç»†ç²’åº¦ä¾èµ–æ£€æµ‹æ˜¯è¯¥é¡¹ç›®çš„åŠ¨æœºã€‚ï¼ˆå¯¹æ•°æ®çŠ¶æ€ç®¡ç†çš„çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå¹¶åŠæ—¶ä¿®æ”¹æ•°æ®ï¼‰

Knockout çš„ç»‘å®šåªæ˜¯åœ¨è¿è¡Œæ—¶éå†çš„ HTML ä¸­çš„å­—ç¬¦ä¸²ã€‚å®ƒä»¬å–å†³äºå…‹éš†ä¸Šä¸‹æ–‡ï¼ˆ$parent ç­‰...ï¼‰ã€‚è€Œ Solid ä½¿ç”¨ JSX æˆ– JavaScript API çš„æ ‡ç­¾æ¨¡æ¿å­—é¢é‡æ¥æ¨¡æ¿åŒ–ã€‚

æœ€å¤§çš„åŒºåˆ«å¯èƒ½æ˜¯ Solid çš„æ‰¹å¤„ç†æ›´æ”¹æ–¹æ³•å¯ç¡®ä¿åŒæ­¥æ€§ï¼Œè€Œ Knockout å…·æœ‰ä½¿ç”¨å»¶è¿Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—çš„ deferUpdatesã€‚



#### Solidçš„å‡ ä¸ªç‰ˆæœ¬

Solid æ›´åŠ åƒæ˜¯ä¸€ä¸ª â€œæ¸²æŸ“åº“â€ è€Œä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œæ‰€ä»¥solidæœ‰å‡ ä¸ªç‰ˆæœ¬éƒ½å¯ä»¥ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»å®˜æ–¹æä¾›çš„[æ¡ˆä¾‹](https://playground.solidjs.com/)çœ‹åˆ°å…¶æ¨¡ç‰ˆç¼–è¯‘å¾—åˆ°çš„é¢—ç²’åº¦å“åº”ï¼ˆå…¶å®å°±æ˜¯ç›´æ¥ç¼–è¯‘æˆä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œå¯¹domæ¨¡ç‰ˆè¿›è¡ŒçŠ¶æ€æ’å…¥ï¼‰

![](/å‰ç«¯æ¡†æ¶å°è§£/jie10.png)

1. [**solid**](https://github.com/ryansolid/solid) â€” This is the stock ES2015 proxy version with succinct setter syntax on top of fine-grained change detection feeding into DOM Template Node cloning. It accomplishes this with precompiled JSX templates. **(**[**Code**](https://github.com/ryansolid/js-framework-benchmark/blob/solid-variations/frameworks/keyed/solid/src/main.jsx)**)**
   solid

   è¿™æ˜¯ ES2015 ä»£ç†ç‰ˆæœ¬ï¼Œåœ¨ç»†ç²’åº¦æ›´æ”¹çš„åŸºç¡€ä¸Šå…·æœ‰ç®€æ´çš„ setter è¯­æ³•ï¼Œå¹¶é¦ˆé€åˆ° DOM æ¨¡æ¿èŠ‚ç‚¹å…‹éš†ä¸­ã€‚å®ƒé€šè¿‡é¢„ç¼–è¯‘çš„ JSX æ¨¡æ¿å®ç°æ­¤ç›®çš„ã€‚ï¼ˆä»£ç ï¼‰

2. [**solid-signals**](https://github.com/ryansolid/solid) â€” This version is the same as above but eschews the convenience of proxies for raw Signals. It makes the implementation heavier, but it leaves a smaller bundle and greater performance. **(**[**Code**](https://github.com/ryansolid/js-framework-benchmark/blob/solid-variations/frameworks/keyed/solid-signals/src/main.jsx)**)**
   å›ºä½“ä¿¡å·â€” æ­¤ç‰ˆæœ¬ä¸ä¸Šè¿°ç›¸åŒï¼Œä½†é¿å¼€äº†åŸå§‹ä¿¡å·ä»£ç†çš„ä¾¿åˆ©æ€§ã€‚å®ƒä½¿å®ç°æ›´é‡ï¼Œä½†å®ƒç•™ä¸‹äº†æ›´å°çš„æ†ç»‘åŒ…å’Œæ›´é«˜çš„æ€§èƒ½ã€‚ï¼ˆä»£ç ï¼‰

3. [**solid-lit**](https://github.com/ryansolid/solid) â€” This version eschews JSX precompilation for Just in Time Tagged Template Literal runtime compilation to achieve DOM Template Node cloning. **(**[**Code**](https://github.com/ryansolid/js-framework-benchmark/blob/solid-variations/frameworks/keyed/solid-lit/src/main.js)**)**
   solid-lit â€” æ­¤ç‰ˆæœ¬é¿å¼€äº† JSX é¢„ç¼–è¯‘ï¼Œç”¨äºå®æ—¶æ ‡è®°æ¨¡æ¿æ–‡æœ¬è¿è¡Œæ—¶ç¼–è¯‘ï¼Œä»¥å®ç° DOM æ¨¡æ¿èŠ‚ç‚¹å…‹éš†ã€‚ï¼ˆä»£ç ï¼‰

4. [**solid-h**](https://github.com/ryansolid/solid) â€” This version uses HyperScript to translate to `document.createElement` on the fly. But otherwise uses the same Solid implementation as the others. **(**[**Code**](https://github.com/ryansolid/js-framework-benchmark/blob/solid-variations/frameworks/keyed/solid-h/src/main.js)**)**
   solid-h â€” æ­¤ç‰ˆæœ¬ä½¿ç”¨HyperScriptå³æ—¶è½¬æ¢ä¸º `document.createElement` ã€‚ä½†é™¤æ­¤ä¹‹å¤–ï¼Œä½¿ç”¨ä¸å…¶ä»–å®ç°ç›¸åŒçš„ Solid å®ç°ã€‚ï¼ˆä»£ç ï¼‰



#### Solidæºç 

æ•´ç†æ¥çœ‹ï¼Œç¿»é˜…solidjsæºç æ¯”è¾ƒéº»çƒ¦ï¼Œæ¯•ç«Ÿä½œè€…æŠŠä¸€äº›ç¼–è¯‘å’Œæ¸²æŸ“çš„æµç¨‹æ”¾åœ¨dom-expressionsè¿™ä¸ªåº“ï¼Œéœ€è¦è½®æµç¿»çœ‹

ç¬¬äºŒä¸ªéº»çƒ¦çš„ç‚¹æ˜¯ä½œè€…å–œæ¬¢ç”¨

```js
export * from "./xxx/index.js";
```

çš„å½¢å¼è¿›è¡Œå¯¼å‡ºï¼Œæ¯”è¾ƒéš¾å®šä½..

##### createSignal

ä¸»è¦çœ‹ä¸‹ createSignal çš„çŠ¶æ€ç®¡ç†ï¼Œå¾ˆå¤šæ–‡ç« ä¼šä»¥ä¸ºsolidç”¨çš„æ˜¯åŸºäºProxyçš„å“åº”å¼ï¼Œå®åˆ™ä¸ç„¶ï¼Œè¿˜æ˜¯ç”¨çš„è€Knockouté‚£ä¸€å¥—å‘å¸ƒè®¢é˜…çš„æ•°æ®å“åº”ã€‚

é¦–å…ˆæˆ‘ä»¬å¾—å…ˆçŸ¥é“2ä¸ªé‡è¦çš„è§’è‰²ç±»å‹ï¼š `SignalState`ã€ `Computation`

ä¿¡å·ä¸»è¦é€šè¿‡ä¸€ä¸ªå¯¹è±¡å­˜å‚¨ï¼Œç±»å‹ä¸ºtype SignalState

- valueï¼šå½“å‰çš„å€¼
- observersï¼šè§‚å¯Ÿè€…æ•°ç»„ï¼Œ ç±»å‹ä¸º type Computation
- observerSlotsï¼šè§‚å¯Ÿè€…å¯¹è±¡åœ¨æ•°ç»„çš„ä½ç½®
- comparatorï¼šæ¯”è¾ƒå™¨ï¼Œé€šè¿‡æ¯”è¾ƒåˆ™æ›´æ”¹valueï¼Œé»˜è®¤falseï¼Œæµ…æ¯”è¾ƒ

```js
export function createSignal<T>(
  value?: T,
  options?: SignalOptions<T | undefined>
): Signal<T | undefined> {
  options = options ? Object.assign({}, signalOptions, options) : signalOptions;

  const s: SignalState<T | undefined> = {
    value,
    observers: null,
    observerSlots: null,
    comparator: options.equals || undefined
  };

  if ("_SOLID_DEV_" && !options.internal) {
    if (options.name) s.name = options.name;
    registerGraph(s);
  }

  const setter: Setter<T | undefined> = (value?: unknown) => {
    if (typeof value === "function") {
      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);
      else value = value(s.value);
    }
    return writeSignal(s, value);
  };

  return [readSignal.bind(s), setter];
}
```

```ts
export interface SignalState<T> extends SourceMapValue {
  value: T;
  observers: Computation<any>[] | null;
  observerSlots: number[] | null;
  tValue?: T;
  comparator?: (prev: T, next: T) => boolean;
}
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨åˆ›å»ºçŠ¶æ€æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªSignalStateï¼Œé€šè¿‡ `readSignal` å’Œ  `writeSignal` åˆ†åˆ«è¯»å–å’Œæ”¹å†™  SignalState



åœ¨å…¨å±€ä¸‹è¿˜æœ‰ä¸€ä¸ªListenerï¼Œç”¨äºæš‚å­˜ä¸€ä¸ªcomputationç±»å‹çš„è§‚å¯Ÿè€…ï¼Œåœ¨ç»„ä»¶æ¸²æŸ“ï¼ˆ`createRenderEffect`ï¼‰ï¼Œæˆ–è€…åœ¨è°ƒç”¨`createEffect`æ—¶ï¼Œä¼šé€šè¿‡ä¸€ä¸ªå« `updateComputation` çš„æ–¹æ³•å¯¹å…¨å±€çš„ Listener è¿›è¡Œèµ‹å€¼ï¼Œä¸ºåç»­çš„ä¾èµ–è¿½è¸ªé“ºå«

```ts
let Listener: Computation<any> | null = null;
```

```ts
export interface Computation<Init, Next extends Init = Init> extends Owner {
  fn: EffectFunction<Init, Next>;
  state: ComputationState;
  tState?: ComputationState;
  sources: SignalState<Next>[] | null;
  sourceSlots: number[] | null;
  value?: Init;
  updatedAt: number | null;
  pure: boolean;
  user?: boolean;
  suspense?: SuspenseContextType;
}
```

```ts
function updateComputation(node: Computation<any>) {
  if (!node.fn) return;
  cleanNode(node);
  const owner = Owner,
    listener = Listener,
    time = ExecCount;
  Listener = Owner = node;
  runComputation(
    node,
    Transition && Transition.running && Transition.sources.has(node as Memo<any>)
      ? (node as Memo<any>).tValue
      : node.value,
    time
  );
//...
  Listener = listener;
  Owner = owner;
}
```



ç”±äºå¯¹signalçš„è¯»å–ï¼Œæ˜¯é€šè¿‡å‡½æ•°è°ƒç”¨çš„å½¢å¼è¿›è¡Œæ•°æ®è¯»å–

```html
 <div class="no-open" style={{ color: 'blue' }}>{`å½“å‰count: ${count()}`}</div>
```

æ‰€ä»¥åœ¨ä»»ä½•ä¸€ä¸ªè§’è½è¯»å–SignalStateæ—¶ï¼Œéƒ½ä¼šè°ƒç”¨ readSignal å‡½æ•°ï¼Œå¹¶ä¸”æŠŠå½“å‰å…¨å±€ä¸‹è¢«æš‚å­˜çš„â€œè§‚å¯Ÿè€…â€Listenerï¼Œä¹Ÿå°±æ˜¯å¼•ç”¨åˆ°SignalStateçš„åœ°æ–¹ï¼Œæ”¾å…¥è‡ªèº«çš„observersï¼ˆè§‚å¯Ÿè€…æ•°ç»„ï¼‰ä¸­ï¼Œå¹¶ä¸”æŠŠè§‚å¯Ÿè€…æºï¼ˆsourceï¼‰æŒ‡å‘å½“å‰signalï¼Œå®ç°æ•°æ®ç»‘å®šï¼Œå¹¶ä¸”è¿”å›å¯¹åº”çš„ `SignalState`

```js
export function readSignal(this: SignalState<any> | Memo<any>) {
  //è¿™é‡ŒTransitionå¯ä»¥å…ˆä¸ç”¨ç®¡ï¼Œå®ƒç”¨äº `useTransition`  ï¼Œæ‰¹é‡å¼‚æ­¥æ›´æ–°å»¶è¿Ÿæäº¤ä½¿ç”¨çš„
  const runningTransition = Transition && Transition.running;
  if (
    (this as Memo<any>).sources &&
    (runningTransition ? (this as Memo<any>).tState : (this as Memo<any>).state)
  ) {
    if ((runningTransition ? (this as Memo<any>).tState : (this as Memo<any>).state) === STALE)
      updateComputation(this as Memo<any>);
    else {
      const updates = Updates;
      Updates = null;
      runUpdates(() => lookUpstream(this as Memo<any>), false);
      Updates = updates;
    }
  }
  //æ·»åŠ è§‚å¯Ÿè€…ï¼Œç»‘å®šæ•°æ®
  if (Listener) {
    const sSlot = this.observers ? this.observers.length : 0;
    if (!Listener.sources) {
      Listener.sources = [this];
      Listener.sourceSlots = [sSlot];
    } else {
      Listener.sources.push(this);
      Listener.sourceSlots!.push(sSlot);
    }
    if (!this.observers) {
      this.observers = [Listener];
      this.observerSlots = [Listener.sources.length - 1];
    } else {
      this.observers.push(Listener);
      this.observerSlots!.push(Listener.sources.length - 1);
    }
  }
  if (runningTransition && Transition!.sources.has(this)) return this.tValue;
  return this.value;
}
```



å¯¹äºä¿¡å·çš„å†™å…¥ï¼Œåˆ™è°ƒç”¨ writeSignal å‡½æ•°ï¼Œåœ¨é—­åŒ…å†…æ”¹å˜å½“å‰SignalStateåï¼Œéå†åœ¨åœ¨readSignalé˜¶æ®µè¢«æ”¶é›†çš„è§‚å¯Ÿè€…æ•°ç»„ï¼Œäºå½“å‰Effectæ‰§è¡Œåˆ—è¡¨ä¸­æ¨å…¥è§‚å¯Ÿè€…

```js
export function writeSignal(node: SignalState<any> | Memo<any>, value: any, isComp?: boolean) {
  let current =
    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;
  if (!node.comparator || !node.comparator(current, value)) {
    if (Transition) {
      const TransitionRunning = Transition.running;
      if (TransitionRunning || (!isComp && Transition.sources.has(node))) {
        Transition.sources.add(node);
        
        .tValue = value;
      }
      if (!TransitionRunning) node.value = value;
    } else node.value = value;
    if (node.observers && node.observers.length) {
      runUpdates(() => {
        for (let i = 0; i < node.observers!.length; i += 1) {
          const o = node.observers![i];
          const TransitionRunning = Transition && Transition.running;
          if (TransitionRunning && Transition!.disposed.has(o)) continue;
          if (TransitionRunning ? !o.tState : !o.state) {
            if (o.pure) Updates!.push(o);
            else Effects!.push(o);
            if ((o as Memo<any>).observers) markDownstream(o as Memo<any>);
          }
          if (!TransitionRunning) o.state = STALE;
          else o.tState = STALE;
        }
        if (Updates!.length > 10e5) {
          Updates = [];
          if ("_SOLID_DEV_") throw new Error("Potential Infinite Loop Detected.");
          throw new Error();
        }
      }, false);
    }
  }
  return value;
}
```

æ­¤æ—¶æˆ‘ä»¬çš„Effectåˆ—è¡¨å°±ä¿å­˜äº†å½“æ—¶çš„è§‚å¯Ÿè€…ä»¬ï¼Œç„¶åéå†æ‰§è¡Œ  `runEffects`ï¼Œè¿›è¡Œæ¶ˆæ¯çš„é‡æ–°åˆ†å‘ï¼Œç„¶ååœ¨å¯¹åº”çš„èŠ‚ç‚¹ï¼ˆ`Computation`ï¼‰é‡æ–°æ‰§è¡Œ `readSignal` å‡½æ•°ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°æœ€æ–°çš„æ•°æ®ç»“æœäº†ã€‚



æ²¡æœ‰ä»»ä½•ä¾èµ–æ—¶å°±æ­£å¸¸ä¿®æ”¹è¯¥SignalStateï¼Œä¸”observersã€observerSlotsä¸ºnull

```js
const { createSignal } = require("../../solid/dist/solid.cjs");

{
  const [count, setCount] = createSignal(0);

  setCount(1);
  setCount((pre) => pre + 2);


  console.log(count());
}
```

![](/å‰ç«¯æ¡†æ¶å°è§£/jie11.png)



##### createEffect

è€ŒåƒcreateEffectè¿™ç§è‡ªåŠ¨è¿½è¸ªä¾èµ–çš„å®ç°æ—¶è°ƒç”¨æ—¶ç›´æ¥åˆ›å»ºä¸€ä¸ªcomputationå¯¹è±¡ï¼ˆ`createComputation`ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œéšåè¢«æ·»åŠ åˆ°Effectsæ‰§è¡Œæ•°ç»„ä¸­ã€‚å¹¶ä¸”éšåä¼šå’Œä¹‹å‰çš„æµç¨‹ä¸€æ ·ï¼Œæ‰§è¡Œ `runEffects` -> `updateComputation` -> å»æ‰§è¡ŒcreateEffectå†…éƒ¨çš„ä»£ç é€»è¾‘

```ts
function createEffect<Next, Init>(
  fn: EffectFunction<Init | Next, Next>,
  value?: Init,
  options?: EffectOptions & { render?: boolean }
): void {
  runEffects = runUserEffects;
  const c = createComputation(fn, value!, false, STALE, "_SOLID_DEV_" ? options : undefined),
    s = SuspenseContext && lookup(Owner, SuspenseContext.id);
  if (s) c.suspense = s;
  if (!options || !options.render) c.user = true;
  Effects ? Effects.push(c) : updateComputation(c);
}
```

é€šè¿‡ `updateComputation` ï¼Œå¦‚ä¸Šé¢æ‰€è¯´ å¯¹ `Computation` çš„ä»‹ç»æ‰€è¯´çš„ï¼Œåœ¨ `updateComputation`æ—¶ï¼Œåœ¨å¯¹å…¨å±€çš„Listenerè¿›è¡Œèµ‹å€¼ã€‚



##### ç»„ä»¶çš„æ›´æ–°

ç»„ä»¶çš„æ›´æ–°å’ŒcreateEffectåŒç†ï¼Œåªä¸è¿‡ç»„ä»¶çš„å¼•ç”¨æ˜¯èµ° `createRenderEffect ` -> `updateComputation`

```tsx
function App() {
    const [count, setCount] = createSignal(0);

    return (
        <div class="x-three-year" onClick={() => setCount((pre) => pre + 1)}>
            <div class="no-open">ä½ æœ‰ä¸ªè›‹ç³•åº—å¾…å¼€ä¸š</div>
            <div class="no-open">{count()}</div>
        </div>
    );
}
```

åœ¨ç‚¹å‡»äº‹ä»¶å‘ç”Ÿåï¼Œå’Œæˆ‘ä»¬ä¸Šé¢æ‰€æè¿°çš„`writeSignal` è¡Œä¸ºä¸€è‡´ï¼Œè§¦å‘`updateComputation`ï¼Œèµ°åˆ°å¯¹SignalStateçš„è·å–`readSignal`ï¼Œæ•´ä½“è°ƒç”¨æ ˆå¦‚ä¸‹

![image-20231020202011674](/å‰ç«¯æ¡†æ¶å°è§£/jie13.png)



æ¸²æŸ“jsxèµ°çš„æ˜¯dom-expressionè¿™ä¸ªåº“

```js
export * from "dom-expressions/src/client"; // render
```

```jsx
import { render } from 'solid-js/web';
render(() => <App />, root!);
```



##### ç¼ºç‚¹

ç¼ºç‚¹1:

ç”±äº Solid ä¸èƒ½ä½¿ç”¨ rest å’Œ spread è¯­æ³•æ¥æ‹†åˆ†å’Œåˆå¹¶ propsï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½ç›´æ¥å¯¹propså“åº”å¼è§£æ„ï¼ˆä¸€ä¸ªç›´æ¥ä¼ ä¸€ä¸ªsignalåˆ™å¯ä»¥ï¼‰ï¼Œå› ä¸ºé€šè¿‡è§£æ„çš„å½¢å¼ï¼ˆå› ä¸ºè§£æ„èµ‹å€¼å±äºæµ…æ‹·è´ï¼‰ï¼Œæ‹·è´å½“æ—¶è·å–çš„å€¼ï¼Œä¼šåˆ‡æ–­signalçš„æ›´æ–°ï¼Œè„±ç¦»è¿½è¸ªèŒƒå›´è€Œå¤±å»å“åº”ã€‚

> æ­£å› å¦‚æ­¤ï¼Œè¯·æ—¶åˆ»è®°ä½ä¸èƒ½ç›´æ¥è§£æ„å®ƒä»¬ï¼Œè¿™ä¼šå¯¼è‡´è¢«è§£æ„çš„å€¼è„±ç¦»è¿½è¸ªèŒƒå›´ä»è€Œå¤±å»å“åº”æ€§ã€‚é€šå¸¸ï¼Œåœ¨ Solid çš„ primitive æˆ– JSX ä¹‹å¤–è®¿é—® props å¯¹è±¡ä¸Šçš„å±æ€§å¯èƒ½ä¼šå¤±å»å“åº”æ€§ã€‚é™¤äº†è§£æ„ï¼Œåƒæ˜¯æ‰©å±•è¿ç®—ä»¥åŠ `Object.assign` è¿™æ ·çš„å‡½æ•°ä¹Ÿä¼šå¯¼è‡´å¤±å»å“åº”æ€§ã€‚

æ¯”å¦‚

```tsx
//ä¸è¡Œ
function Other({count}) {
    return (
    <div>
        <div>{count}</div>
    </div>
    );
}

//å¯ä»¥
function Other(props) {
    return (
    <div>
        <div>{props.count}</div>
    </div>
    );
}

function App() {
    const [count, setCount] = createSignal(0);
    return (
        <div class="x-three-year" onClick={() => setCount((pre: any) => pre + 1)}>
            <div class="no-open">ä½ æœ‰ä¸ªè›‹ç³•åº—å¾…å¼€ä¸š</div>
            <div class="no-open">{count()}</div>
            <Other count={count()}></Other>
        </div>
    );
}
```

```tsx
//å¯ä»¥
function Other({count}) {
    return (
    <div>
        <div>{count()}</div>
    </div>
    );
}

function App() {
    const [count, setCount] = createSignal(0);
    return (
        <div class="x-three-year" onClick={() => setCount((pre: any) => pre + 1)}>
            <div class="no-open">ä½ æœ‰ä¸ªè›‹ç³•åº—å¾…å¼€ä¸š</div>
            <div class="no-open">{count()}</div>
            <Other count={count}></Other>
        </div>
    );
}
```

æ‰€ä»¥solidå…³äºä¸€äº›propså“åº”å¼åŠŸèƒ½ï¼Œç”¨çš„æ˜¯proxyå®æ–½æ•°æ®æ‹¦æˆªï¼Œæ¯”å¦‚`splitProps` ã€`mergeProps`

`mergeProps`

ä¸€ä¸ªåˆå¹¶å“åº”æ€§å¯¹è±¡çš„æ–¹æ³•ã€‚ç”¨äºä¸ºç»„ä»¶è®¾ç½®é»˜è®¤ propsï¼Œä»¥é˜²è°ƒç”¨è€…ä¸æä¾›è¿™äº›å±æ€§å€¼ã€‚æˆ–è€…å…‹éš†åŒ…å«å“åº”å±æ€§çš„ props å¯¹è±¡ã€‚

æ­¤æ–¹æ³•é€šè¿‡ä½¿ç”¨ä»£ç†å¹¶ä»¥ç›¸åçš„é¡ºåºè§£æå±æ€§æ¥å·¥ä½œã€‚è¿™å¯ä»¥å¯¹é¦–æ¬¡åˆå¹¶ props å¯¹è±¡æ—¶ä¸å­˜åœ¨çš„å±æ€§è¿›è¡ŒåŠ¨æ€è·Ÿè¸ªã€‚

```ts
// é»˜è®¤ props
props = mergeProps({ name: "Smith" }, props);

// å…‹éš† props
newProps = mergeProps(props);

// åˆå¹¶ props
props = mergeProps(props, otherProps);
```

`splitProps`

æŒ‰ç…§æä¾›çš„ keys å‚æ•°æ¥æ‹†åˆ†å“åº”å¯¹è±¡ã€‚

å®ƒéœ€è¦ä¸€ä¸ªå“åº”å¯¹è±¡å’Œä»»æ„æ•°é‡çš„æ•°ç»„ã€‚å®ƒå°†è¿”å›æ•°ç»„ä¸­æŒ‡å®šçš„é‚£äº›å“åº”å¯¹è±¡ï¼Œè¿”å›çš„æ•°ç»„ä¸­æœ€åä¸€ä¸ªå“åº”å¯¹è±¡å°†æ‹¥æœ‰åŸå§‹å¯¹è±¡çš„æ‰€æœ‰å‰©ä½™å±æ€§ã€‚

å¦‚æœæ‚¨æƒ³ä½¿ç”¨ props çš„ childrenï¼Œå¹¶å°†å‰©ä½™å±æ€§ä¼ é€’ç»™ Child ç»„ä»¶ï¼Œè¿™å°†å¾ˆæœ‰ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```js
function MyComponent(props) {
  const [local, others] = splitProps(props, ["children"]);

  return (
    <>
      <div>{local.children}</div>
      <Child {...others} />
    </>
  );
}
```



ç¼ºç‚¹2ï¼šè¿™ç§å“åº”å¼æ–¹æ³•åªèƒ½è¿›è¡ŒåŒæ­¥è·Ÿè¸ªã€‚å¦‚æœä½ ä½¿ç”¨ setTimeout æˆ–åœ¨çš„ Effect ä¸­ä½¿ç”¨å¼‚æ­¥å‡½æ•°ï¼Œé‚£ä¹ˆ Solid å¹¶ä¸ä¼šè·Ÿè¸ªå¼‚æ­¥æ‰§è¡Œçš„ä»£ç ã€‚

![image-20231023113629967](/å‰ç«¯æ¡†æ¶å°è§£/jie14.png)

ä»¥ä¸‹ä¸è¡ŒğŸ™…ï¼Œå› ä¸ºæ­¤æ—¶èµ°readSignalå‡½æ•°è¯»å–Listenerçš„æ—¶å€™ï¼ŒåŸºæœ¬æµç¨‹å·²ç»èµ°å®Œï¼Œæ•°æ®å·²ç»è¢«æ¸…ç©ºï¼ˆ`Listener = null`   ` Owner= null`ï¼‰ï¼Œæ‰€ä»¥åœ¨è¯»å–æ—¶æ— æ³•å¯¹è¯¥SignalStateè¿›è¡Œè¿½è¸ª

![image-20231023113629967](/å‰ç«¯æ¡†æ¶å°è§£/jie15.png)

![](https://p5.music.126.net/obj/wonDlsKUwrLClGjCm8Kx/31526733332/cbb3/95b3/f79b/8c0cf7c8fc595d282a4c1352b1c9d294.png)



## Vueçš„Vaporæ¨¡å¼

å¾ˆå¤šå…¶ä»–æ¡†æ¶å·²ç»å¼•å…¥äº†ä¸ Vue ç»„åˆå¼ API ä¸­çš„ ref ç±»ä¼¼çš„å“åº”æ€§åŸºç¡€ç±»å‹ï¼Œå¹¶ç§°ä¹‹ä¸ºâ€œä¿¡å·â€ï¼š

- [Solid ä¿¡å·](https://www.solidjs.com/docs/latest/api#createsignal)
- [Angular ä¿¡å·](https://github.com/angular/angular/discussions/49090)
- [Preact ä¿¡å·](https://preactjs.com/guide/v10/signals/)
- [Qwik ä¿¡å·](https://qwik.builder.io/docs/components/state/#usesignal)

ä»æ ¹æœ¬ä¸Šè¯´ï¼Œä¿¡å·æ˜¯ä¸ Vue ä¸­çš„ ref ç›¸åŒçš„å“åº”æ€§åŸºç¡€ç±»å‹ã€‚å®ƒæ˜¯ä¸€ä¸ªåœ¨è®¿é—®æ—¶è·Ÿè¸ªä¾èµ–ã€åœ¨å˜æ›´æ—¶è§¦å‘å‰¯ä½œç”¨çš„å€¼å®¹å™¨ã€‚è¿™ç§åŸºäºå“åº”æ€§åŸºç¡€ç±»å‹çš„èŒƒå¼åœ¨å‰ç«¯é¢†åŸŸå¹¶ä¸æ˜¯ä¸€ä¸ªç‰¹åˆ«æ–°çš„æ¦‚å¿µï¼šå®ƒå¯ä»¥è¿½æº¯åˆ°åå¤šå¹´å‰çš„ [Knockout observables](https://knockoutjs.com/documentation/observables.html) å’Œ [Meteor Tracker](https://docs.meteor.com/api/tracker.html) ç­‰å®ç°ã€‚Vue çš„é€‰é¡¹å¼ API å’Œ React çš„çŠ¶æ€ç®¡ç†åº“ [MobX](https://mobx.js.org/) ä¹Ÿæ˜¯åŸºäºåŒæ ·çš„åŸåˆ™ï¼Œåªä¸è¿‡å°†åŸºç¡€ç±»å‹è¿™éƒ¨åˆ†éšè—åœ¨äº†å¯¹è±¡å±æ€§èƒŒåã€‚

è™½ç„¶è¿™å¹¶ä¸æ˜¯ä¿¡å·çš„å¿…è¦ç‰¹å¾ï¼Œä½†å¦‚ä»Šè¿™ä¸ªæ¦‚å¿µç»å¸¸ä¸ç»†ç²’åº¦è®¢é˜…å’Œæ›´æ–°çš„æ¸²æŸ“æ¨¡å‹ä¸€èµ·è®¨è®ºã€‚ç”±äºä½¿ç”¨äº†è™šæ‹Ÿ DOMï¼ŒVue ç›®å‰[ä¾é ç¼–è¯‘å™¨æ¥å®ç°ç±»ä¼¼çš„ä¼˜åŒ–](https://cn.vuejs.org/guide/extras/rendering-mechanism.html#compiler-informed-virtual-dom)ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¹Ÿåœ¨æ¢ç´¢ä¸€ç§æ–°çš„å— Solid å¯å‘çš„ç¼–è¯‘ç­–ç•¥ (Vapor Mode)ï¼Œå®ƒä¸ä¾èµ–äºè™šæ‹Ÿ DOMï¼Œè€Œæ˜¯æ›´å¤šåœ°åˆ©ç”¨ Vue çš„å†…ç½®å“åº”æ€§ç³»ç»Ÿã€‚



**Vapor Mode**

åœ¨2022å¹´ç¨€åœŸæ˜é‡‘å¼€å‘è€…å¤§ä¼šä¸Šï¼Œå°¤é›¨æºªã€Š2022 å‰ç«¯ç”Ÿæ€è¶‹åŠ¿ã€‹åœ¨æ¼”è®²ä¸­ä¾¿æåŠåˆ°å¯¹ â€œæ— è™šæ‹Ÿdomâ€çš„æ¢ç´¢ â€”â€” Vue vaporæ¨¡å¼ã€‚ 

å› ä¸ºæ¨¡ç‰ˆæ˜¯ä¸€ä¸ªç¼–è¯‘æºï¼Œæ‰€ä»¥å…¶å®å¯ä»¥ç¼–è¯‘æˆä¸åŒçš„ï¼ˆéè™šæ‹Ÿdomï¼‰çš„è¾“å‡ºï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ¨¡ç‰ˆçš„é™æ€ç»“æ„ï¼Œç„¶åå†æœå¯»å¯¹åº”çš„åŠ¨æ€èŠ‚ç‚¹ï¼Œä½¿åŠ¨æ€èŠ‚ç‚¹å’ŒçŠ¶æ€è¿›è¡Œå“åº”å¼çš„ä¸€ä¸ªç»‘å®šï¼ˆå…¶å®ä¹Ÿå°±æ˜¯solidjsé‡‡ç”¨çš„ä¸€ä¸ªç­–ç•¥ï¼‰

ç›®å‰æ­£å®éªŒè¿›è¡Œä¸­ï¼Œå¹¶ä¸”å¸Œæœ›æ˜¯æ¸è¿›å¼çš„åŠŸèƒ½ï¼Œèƒ½è®©Vaporå¼€å¯åç»§ç»­ä½¿ç”¨è™šæ‹Ÿdomçš„ç»„ä»¶åº“



**API è®¾è®¡æƒè¡¡**

Preact å’Œ Qwik çš„ä¿¡å·è®¾è®¡ä¸ Vue çš„ [shallowRef](https://cn.vuejs.org/api/reactivity-advanced.html#shallowref) éå¸¸ç›¸ä¼¼ï¼šä¸‰è€…éƒ½é€šè¿‡ `.value` å±æ€§æä¾›äº†ä¸€ä¸ªæ›´æ”¹æ¥å£ã€‚æˆ‘ä»¬å°†é‡ç‚¹è®¨è®º Solid å’Œ Angular çš„ä¿¡å·ã€‚

Solid Signals

Solid çš„ `createSignal()` API è®¾è®¡å¼ºè°ƒäº†è¯»/å†™éš”ç¦»ã€‚ä¿¡å·é€šè¿‡ä¸€ä¸ªåªè¯»çš„ getter å’Œå¦ä¸€ä¸ªå•ç‹¬çš„ setter æš´éœ²ï¼š

```js
const [count, setCount] = createSignal(0)

count() // è®¿é—®å€¼
setCount(1) // æ›´æ–°å€¼
```

æ³¨æ„åˆ° `count` ä¿¡å·åœ¨æ²¡æœ‰ setter çš„æƒ…å†µä¹Ÿèƒ½ä¼ é€’ã€‚è¿™å°±ä¿è¯äº†é™¤é setter ä¹Ÿè¢«æ˜ç¡®æš´éœ²ï¼Œå¦åˆ™çŠ¶æ€æ°¸è¿œä¸ä¼šè¢«æ”¹å˜ã€‚è¿™ç§æ›´å†—é•¿çš„è¯­æ³•å¸¦æ¥çš„å®‰å…¨ä¿è¯çš„åˆç†æ€§å–å†³äºé¡¹ç›®çš„è¦æ±‚å’Œä¸ªäººå“å‘³â€”â€”ä½†å¦‚æœä½ å–œæ¬¢è¿™ç§ API é£æ ¼ï¼Œå¯ä»¥è½»æ˜“åœ°åœ¨ Vue ä¸­å¤åˆ¶å®ƒï¼š

```js
import { shallowRef, triggerRef } from 'vue'

export function createSignal(value, options) {
  const r = shallowRef(value)
  const get = () => r.value
  const set = (v) => {
    r.value = typeof v === 'function' ? v(r.value) : v
    if (options?.equals === false) triggerRef(r)
  }
  return [get, set]
}
```



## Inferno

[å®˜ç½‘åœ°å€](https://www.infernojs.org/)ï¼Œè¯­æ³•å’Œreactå¾ˆç›¸ä¼¼ï¼ˆæ–¹ä¾¿reactæ·±åº¦ç”¨æˆ·è¿ç§»ï¼‰ï¼ŒåŒºåˆ«å¯ä»¥åœ¨å®˜ç½‘å¤„æŸ¥çœ‹

![](/å‰ç«¯æ¡†æ¶å°è§£/jie4.png)

ä¸€ä¸ªå·¨å¿«æ— æ¯”çš„uiæ¡†æ¶ï¼Œæ›¾æ— æ•°æ¬¡å«å†•æ‰§è¡Œé€Ÿåº¦æœ€å¿«çš„å®åº§ï¼ˆThe quickest of the React clones and one of the fastest Virtual DOM libraries.ï¼‰æœ€å¼€å§‹çš„ä½œè€…æ˜¯å¤šç±³å°¼å…‹Â·ç”˜çº³éŸ¦â€”ç°åœ¨ï¼Œä½œä¸ºReactå›¢é˜Ÿçš„ä¸€å‘˜ï¼ŒInfernoæœ€åˆçš„è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†è¯æ˜JavaScriptæ¡†æ¶å¯ä»¥åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œè‰¯å¥½ã€‚

- ç±»ä¼¼ React çš„ APIã€æ¦‚å¿µå’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚ä½¿ç”¨Infernoå…¼å®¹è½»æ¾åˆ‡æ¢ã€‚

  ï¼ˆInfernoçš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒæä¾›äº†ä¸€äº›Reactæˆ–Preactæ²¡æœ‰çš„é™„åŠ åŠŸèƒ½ï¼ˆä»¥ç‰ºç‰²ä¸€äº›æ–‡ä»¶å¤§å°ä¸ºä»£ä»·ï¼‰ï¼‰

- ç”¨äºåœ¨ DOM ä¸­æ¸²æŸ“ UI çš„æœ€å¿«å‰ç«¯æ¡†æ¶ä¹‹ä¸€ï¼Œä½¿ç§»åŠ¨è®¾å¤‡ä¸Šçš„ 60 FPS æˆä¸ºå¯èƒ½ã€‚([å®˜ç½‘çš„åŸºå‡†](https://www.infernojs.org/benchmarks))

- å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šçš„åŒæ„æ¸²æŸ“ï¼Œä»¥åŠä»æœåŠ¡å™¨ç«¯æ¸²æŸ“å¿«é€Ÿå¯åŠ¨ã€‚



Infernoé€šè¿‡åˆ©ç”¨ç°ä»£ JavaScript å¼•æ“æä¾›çš„å‡ ä¸ªä¼˜åŒ–æ¥åŠ å¿«è¿™ä¸ªè¿‡ç¨‹;ä»¥åŠæ”¹è¿›â€œæ¥è§¦â€DOM æ‰€éœ€çš„å¤§é‡è¯•é”™

ä½œè€…æœ¬äººè§£é‡Šå…¶ä¼˜åŒ–ç»éªŒæ¶µç›–äº†å‡ ä¸ªç‚¹

- è¯•å›¾ç¡®ä¿å°½å¯èƒ½å¤šçš„å¯¹è±¡å±æ€§è°ƒç”¨ç«™ç‚¹æ˜¯å•æ€çš„ï¼ˆ[é“¾æ¥](https://mrale.ph/blog/2015/01/11/whats-up-with-monomorphism.html)ï¼‰

  ```js
  function f(o) {
    return o.x
  }
  
  //å•æ€
  f({ x: 1 })
  f({ x: 2 })
  
  //å¤šæ€
  f({ x: 3 })
  // o.x cache is still monomorphic here
  f({ x: 3, y: 1 })
  // what about now?
  
  //å·¨æ€
  f({ x: 4, y: 1 }) // polymorphic, degree 2
  f({ x: 5, z: 1 }) // polymorphic, degree 3
  f({ x: 6, a: 1 }) // polymorphic, degree 4
  f({ x: 7, b: 1 }) // megamorphic
  ```

  å·¨æ€çš„å­˜åœ¨æ˜¯ä¸ºäº†é˜²æ­¢å¤šæ€ç¼“å­˜ä¸å—æ§åˆ¶çš„å¢é•¿ï¼Œè¿™æ„å‘³ç€â€œæˆ‘åœ¨è¿™é‡Œçœ‹åˆ°äº†å¤ªå¤šçš„å½¢çŠ¶ï¼Œæˆ‘æ”¾å¼ƒäº†è·Ÿè¸ªå®ƒä»¬â€ã€‚åœ¨V8ä¸­ï¼Œè¶…å½¢æ€ICä»ç„¶å¯ä»¥ç»§ç»­ç¼“å­˜ä¸œè¥¿ï¼Œä½†ä¸æ˜¯åœ¨æœ¬åœ°è¿›è¡Œï¼Œè€Œæ˜¯å°†æƒ³è¦ç¼“å­˜çš„å†…å®¹æ”¾å…¥å…¨å±€å“ˆå¸Œè¡¨ä¸­ã€‚æ­¤å“ˆå¸Œè¡¨å…·æœ‰å›ºå®šå¤§å°ï¼Œæ¡ç›®åªæ˜¯åœ¨å†²çªæ—¶è¢«è¦†ç›–ã€‚

- Inferno avoids using prototype objects with constructors and instead favours object literals with minimal properties.

  ï¼ˆé¿å…å°†åŸå‹å¯¹è±¡ä¸æ„é€ å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œè€Œæ˜¯å€¾å‘äºä½¿ç”¨å…·æœ‰æœ€å°å±æ€§çš„å¯¹è±¡æ–‡æœ¬ï¼‰

  Inferno ä½¿ç”¨å®ç”¨ç¨‹åº/å¸®åŠ©ç¨‹åºå‡½æ•°æ¥æ”¹å˜/è®¿é—®è¿™äº›å¯¹è±¡ï¼Œè€Œä¸æ˜¯å°†æ–¹æ³•æ·»åŠ åˆ°å¯¹è±¡æœ¬èº«ã€‚è¿™åœ¨é JITï¼ˆå®æ—¶ï¼‰ç¼–è¯‘æˆ–å†…å­˜ä¸è¶³çš„ç§»åŠ¨è®¾å¤‡ä¸Šäº§ç”Ÿäº†æ˜æ˜¾çš„å½±å“ã€‚

- Inferno ä¸æ˜¯å°†è™šæ‹Ÿ DOM ä¸çœŸå® DOM â€œå·®å¼‚â€ï¼Œè€Œæ˜¯å°†è™šæ‹Ÿ DOM ä¸æœ€åä¸€ä¸ªåˆ›å»ºçš„è™šæ‹Ÿ DOM è¿›è¡Œæ¯”è¾ƒã€‚è¿™ä¹Ÿå¯¹æ€§èƒ½äº§ç”Ÿäº†æ˜æ˜¾çš„å½±å“ã€‚

- Inferno å°è¯•å°½å¯èƒ½é‡ç”¨å±æ€§ã€å¯¹è±¡å’Œ DOM èŠ‚ç‚¹ã€‚åˆ›å»ºå¤ªå¤šå¯¹è±¡å¯èƒ½ä¼šåœ¨å†…å­˜ã€GCï¼ˆåƒåœ¾å›æ”¶å™¨ï¼‰å’Œæ•´ä½“æ€§èƒ½ä¸Šäº§ç”Ÿé«˜æ˜‚çš„æˆæœ¬ã€‚ä¾‹å¦‚ï¼ŒInferno ä¸æ˜¯åœ¨å¯¹è±¡ä¸Š `VNode` åˆ›å»ºé¢å¤–çš„å±æ€§ï¼Œè€Œæ˜¯é‡ç”¨ä»¥å‰çš„å±æ€§ï¼ˆå³ä½¿å±æ€§åç§°ä¸å†çœŸæ­£ä¸å…¶ä¸­æ”¾ç½®çš„å†…å®¹å¯¹é½ï¼‰ã€‚æ­¤å¤–ï¼ŒDOM èŠ‚ç‚¹ä¹Ÿè¢«å­˜å‚¨å’Œå›æ”¶ï¼Œä»è€Œé™ä½äº†é‡æ–°åˆ›å»ºå¤§å‹ DOM æ ‘å’Œå†æ¬¡è®¡ç®—æ‰€æœ‰å†…éƒ¨å¯è§†åŒ–è®¡ç®—çš„æˆæœ¬ã€‚

- Infernoå°½å¯èƒ½é¿å…ç»å¸¸æ¥è§¦DOMã€‚ç›¸åï¼Œå®ƒé€‰æ‹©åªæ¥è§¦ DOM èŠ‚ç‚¹ä¸Šçš„ä¸€å°éƒ¨åˆ†å±æ€§/æ–¹æ³•ï¼ˆ `firstChild` `lastChild` `parentNode` `nextSibling` `createElement` `removeChild` `insertBefore` ã€ `replaceChild` ï¼‰ã€‚Infernoé¿å…ä½¿ç”¨ `childNodes` ï¼Œ `innerHTML` å› ä¸ºè¿™äº›æ–¹æ³•å¾€å¾€éå¸¸æ˜‚è´µã€‚æ¸…é™¤ DOM å†…å®¹çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¼˜åŒ–æŠ€å·§æ˜¯ä½¿ç”¨ `textContent('')` .

- Inferno æ›´å–œæ¬¢ä½¿ç”¨æ‰€æœ‰ç”± JIT ç¼–è¯‘å™¨å†…è”çš„è¾…åŠ©å‡½æ•° - ä¾‹å¦‚ï¼Œè€Œä¸æ˜¯æ‰§è¡Œ ï¼Œæ‰§è¡Œ `foo === null` `isNull(foo)` ã€‚æˆ‘ä»¬å‘ç°è¿™ç¡®å®æœ‰åŠ©äºæé«˜æ†ç»‘åŒ…å¤§å°ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒè¿˜æé«˜äº† JIT æ€§èƒ½ï¼ˆå½“å†…è”çš„å†…è”é¢„ç®—å°šæœªå®Œå…¨ç”¨å®Œæ—¶ï¼‰ã€‚

- è¿›è¡Œäº†å¹¿æ³›çš„æ£€æŸ¥ï¼Œä»¥ç¡®ä¿å°†å»ä¼˜åŒ–ï¼ˆâ€œdeoptsâ€ï¼Œå³ JIT ç¼–è¯‘å™¨æ— æ³•ç¼–è¯‘æŸäº›å†…å®¹ï¼‰ä¿æŒåœ¨ç»å¯¹æœ€ä½é™åº¦ã€‚Infernoå›¢é˜Ÿä½¿ç”¨åŸºå‡†æµ‹è¯•ï¼Œåˆ†æå·¥å…·ï¼ˆIRHydra 2ï¼ŒChrome Dev Toolsï¼‰å’Œä»£ç åº“å„ä¸ªéƒ¨åˆ†çš„å¤§é‡å³°å€¼é‡å†™ï¼Œä»¥ä¸æ–­å¯»æ‰¾åˆ é™¤deoptsçš„æ–¹æ³•ã€‚

- Inferno å¯¹æŸäº›äº‹ä»¶ä½¿ç”¨è‡ªå·±çš„äº‹ä»¶ç³»ç»Ÿï¼Œè¿™å…è®¸å®ƒæ ¹æ®äº‹ä»¶ç±»å‹é€‰æ‹©å§”æ‰˜äº‹ä»¶æˆ–å†…è”äº‹ä»¶ã€‚åœ¨ cetain ç”¨ä¾‹ä¸­ï¼Œä¸éå§”æ‰˜äº‹ä»¶ç›¸æ¯”ï¼Œå§”æ‰˜äº‹ä»¶å¯ä»¥æä¾›æ˜¾ç€çš„æ€§èƒ½å’Œå†…å­˜æ”¹è¿›ã€‚

- Infernoçš„é”®æ§å­æ’åºç®—æ³•éå¸¸é«˜æ•ˆï¼Œå¹¶ä¸”äº§ç”Ÿä»Aåˆ°Bçš„æœ€å°å¯èƒ½çš„DOMçªå˜ã€‚



çŸ¥ä¹ä¸Šçš„è¯„ä»·ï¼šè™½ç„¶æœ‰ä¸€äº›å°ç‘•ç–µï¼ˆä¾‹å¦‚ Inferno åªä¼šå¯¹æ–°æ—§ä¸¤ä¸ª [vdom](https://www.zhihu.com/search?q=vdom&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A309089072}) è¿›è¡Œå¯¹æ¯”ï¼Œæ‹¿ vdom å’ŒçœŸå® dom å¯¹æ¯”çš„æ˜¯ [preact](https://www.zhihu.com/search?q=preact&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A309089072})ï¼‰ï¼Œä½†æŒ‡å‡ºçš„æ–¹å‘æ²¡æœ‰é”™ï¼šInferno å¿«çš„åŸå› ä¸»è¦åœ¨æ•°æ®ç»“æ„ã€ç®—æ³•å’Œ APIã€‚[é“¾æ¥](https://www.zhihu.com/question/65824137)ï¼Œä¸è¿‡è¿™ä¸ªæœ‰ç‚¹è€äº†ï¼Œ18å¹´çš„è¯„è®º

solidjså®˜æ–¹å¯¹Infernoçš„è¯„ä»·ï¼šSvelteå¾ˆå°ï¼Œä½†æ€§èƒ½å¹¶ä¸ä¼˜äºInfernoç­‰æœ€å¿«çš„VDOMåº“



## è™šæ‹Ÿdomçš„äº‰è®®

è™šæ‹Ÿdomçš„è¯ç”Ÿé—´éš”ç‚¹ä¸»è¦åœ¨jqueryåˆ°reactè¿™æ®µæ—¶æœŸï¼Œå½“æ—¶jqueryçš„è¯­æ³•è¿˜æ˜¯åœç•™åœ¨é‚£ç§å‘½ä»¤å¼domæ“ä½œä¹‹ä¸­

```js
//ä¼ ç»Ÿï¼Œå‰é¢ç»‘å®šäº‹ä»¶ï¼Œåé¢åˆ›å»ºçš„æ ‡ç­¾æ²¡æœ‰ç»‘å®šè¯¥äº‹ä»¶
$("ol li").click(function() {})
let li = $("<li>xxx</li>");
$("ol").append(li);
```

è€Œè™šæ‹Ÿdomè¯ç”Ÿä¹‹åˆï¼Œä¹Ÿæ˜¯ä¸ºäº†æŠŠå†™æ³•ä¸“æ³¨äºå£°æ˜å¼ä¹‹ä¸Šï¼Œéœ€è¦domæ“ä½œè¿™ç§â€œè¡Œä¸ºâ€ï¼Œäº¤ç»™æ¡†æ¶å¤„ç†ï¼Œå› æ­¤å¼•å‘äº†

1. æ—¢ç„¶domæ“ä½œé›†ä¸­äº¤ç»™æ¡†æ¶äº†ï¼Œé‚£æ¡†æ¶å²‚ä¸æ˜¯å¯ä»¥å»â€œæ‰¹å¤„ç†â€domæ“ä½œï¼Œæ›´å¥½çš„å‡å°‘å¼€é”€ï¼Ÿ
2. æ—¢ç„¶å¼€å§‹å†™å£°æ˜å¼äº†ï¼Œé‚£å¦‚ä½•è®©æ•°æ®å’Œdomå…³è”èµ·æ¥ï¼Ÿå¦‚æœæ¯æ¬¡æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œè¯¥å¦‚ä½•ç›‘å¬æ•°æ®æºï¼Ÿ



#### è¯ç”Ÿä¹‹åˆ

##### è™šæ‹Ÿdomå†™æ³•

åœ¨ä¸Šå¤æµè¡Œçš„å­—ç¬¦ä¸²æ‹¼æ¥æ—¶ä»£ï¼Œ[jQuery](https://jquery.com/)ä¸€å®¶ç‹¬å¤§ï¼Œå½“æ—¶jqueryçš„è¯­æ³•è¿˜æ˜¯åœç•™åœ¨é‚£ç§å‘½ä»¤å¼domæ“ä½œä¹‹ä¸­ï¼Œè€Œåœ¨2013å¹´ï¼ŒFacebookçš„Jordan Walkeæå‡ºæ¥äº†ï¼Œæ‰“ç®—æŠŠ2010å¹´FaceBookåšå‡ºæ¥çš„ XHP çš„æ‹“å±•åŠŸèƒ½è¿ç§»åˆ° JS ä¸­ï¼Œå½¢æˆä»¥JSXä½œä¸ºæ‹“å±•çš„æ–°ç¼–ç å½¢å¼

```jsx
const fn = () => {};
const Component = (
  <ul>
    {data.map(item => <MyItem data={item} onClick={fn}/>)}
  </ul>
);
```



##### è™šæ‹Ÿdomä¼˜åŒ–

ä¸€ç›´ä»¥æ¥æˆ‘ä»¬éƒ½ä¿¡å¥‰ä¸€ä¸ªé“ç†ï¼š

> è®¡ç®—æœºç§‘å­¦é¢†åŸŸçš„ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªé—´æ¥çš„ä¸­é—´å±‚æ¥è§£å†³.  --------David Wheeler

è€Œå½“æ—¶è™šæ‹Ÿdomï¼Œä¹Ÿå°±æ˜¯åœ¨ä»£ç å’Œå®é™…domæ“ä½œï¼Œç”±æ¡†æ¶åšäº†ä¸€å±‚ä¸­é—´å±‚ï¼Œä»è€Œå®ç° ä»£ç  -> è™šæ‹Ÿdomæ ‘ -> çœŸå®domæ ‘

è¿™ä¸ªæ¦‚å¿µæ˜¯ç”± [React](https://reactjs.org/) ç‡å…ˆå¼€æ‹“ï¼Œéšåè¢«è®¸å¤šä¸åŒçš„æ¡†æ¶é‡‡ç”¨



å¹¶ä¸”å½“æ—¶æœ‰ä¸€æœ¬ä¹¦ã€Šé«˜æ€§èƒ½çš„javascriptã€‹ï¼Œé‡Œé¢æœ‰ä¸ªè§‚ç‚¹å°±æ˜¯â€œdomæ“ä½œæ˜¯å¾ˆæ…¢çš„ï¼Œdomæ“ä½œæ¯”è¾ƒæ¶ˆè€—æ€§èƒ½â€ã€

è€Œå‰reactæ ¸å¿ƒå›¢é˜ŸPete Huntä¹Ÿåœ¨2013å¹´æ—¶ï¼Œå¯¹reactçš„å®£ä¼ æ¼”è®²ä¸­ç–¯ç‹‚åæ§½é‡å¤æ€§domæ“ä½œçš„â€œå·¨å¤§å¼€é”€â€ [ã€Šé‡æ–°æ€è€ƒå…¸èŒƒå®ä¾‹çš„æ„ä¹‰ã€‹](https://www.youtube.com/watch?v=x7cQ3mrcKaY)

![](/å‰ç«¯æ¡†æ¶å°è§£/jie1.png)



æ‰€ä»¥å½“æ—¶æå‡ºè¿™å¥—è™šæ‹Ÿdomåœ¨äº

- æ‰“å¼€å‡½æ•°å¼ UI ç¼–ç¨‹çš„å¤§é—¨ï¼Œç»„ä»¶æŠ½è±¡åŒ–ï¼Œä½¿å¾—ä»£ç æ›´æ˜“ç»´æŠ¤

- è·¨å¹³å°ï¼Œè™šæ‹ŸDOMä¸ä»…å¯ä»¥å˜æˆDOMï¼Œè¿˜å¯ä»¥å˜æˆå°ç¨‹åºã€iosåº”ç”¨ã€å®‰å“åº”ç”¨ï¼Œå› ä¸ºè™šæ‹ŸDOMæœ¬è´¨ä¸Šåªæ˜¯ä¸€ä¸ªJSå¯¹è±¡

- æ•°æ®ç»‘å®šï¼Œæ›´æ–°è§†å›¾æ—¶ï¼Œå‡å°‘DOMæ“ä½œï¼šå¯ä»¥å°†å¤šæ¬¡DOMæ“ä½œåˆå¹¶ä¸ºä¸€æ¬¡æ“ä½œï¼Œæ¯”å¦‚æ·»åŠ 100ä¸ªèŠ‚ç‚¹åŸæ¥æ˜¯ä¸€ä¸ªä¸€ä¸ªæ·»åŠ ï¼Œç°åœ¨æ˜¯ä¸€æ¬¡æ€§æ·»åŠ ï¼Œå‡å°‘æµè§ˆå™¨å›æµï¼ˆæ¯”å¦‚1000ä¸ªèŠ‚ç‚¹çš„domæ“ä½œï¼Œåˆå¹¶ä¸º1æ¬¡ï¼Œè¿›è¡Œæ‰¹å¤„ç†ï¼‰

  ç±»ä¼¼è¿™æ ·æ‰¹å¤„ç†ï¼š

  ```js
  const fragment = document.createDocumentFragment();
  
  for(let i = 0; i < 1000; i++) {
    const div = document.createElement('div');
    fragment.appendChild(div);
  }
  
  // å°†æ–‡æ¡£ç‰‡æ®µä¸€æ¬¡æ€§æ’å…¥åˆ°ç›®æ ‡å®¹å™¨ä¸­
  const container = document.getElementById('container');
  container.appendChild(fragment);
  ```

- ç”¨è½»é‡çº§çš„jsè¿›è¡Œdiffï¼Œé¿å…å¤§é‡æŸ¥è¯¢å’Œå¤æ‚çš„çœŸå®domçš„å­˜å‚¨ï¼ˆåŒ…å«å¤§é‡å±æ€§ï¼‰

  

æ‰€ä»¥å½“æ—¶æå‡ºè¿™å¥—è™šæ‹Ÿdomçš„diffç®—æ³•åœ¨äº

- è™šæ‹ŸDOMå€ŸåŠ©DOM diff å¯ä»¥æŠŠå¤šä½™çš„æ“ä½œçœç•¥æ‰ï¼Œå‡å°‘é¡µé¢reflowã€repaintã€‚
- ç¼“å­˜domï¼Œæ›´æ–°domæ—¶ä¿å­˜èŠ‚ç‚¹çŠ¶æ€ã€‚



##### Vue2å¼•å…¥è™šæ‹Ÿdom

[Vue çš„ç†å¿µé—®é¢˜](https://zhuanlan.zhihu.com/p/23752826)

å°¤å¤§ï¼šReact çš„ vdom å…¶å®æ€§èƒ½ä¸æ€ä¹ˆæ ·ã€‚Vue 2.0 å¼•å…¥ vdom çš„ä¸»è¦åŸå› æ˜¯ vdom æŠŠæ¸²æŸ“è¿‡ç¨‹æŠ½è±¡åŒ–äº†ï¼Œä»è€Œä½¿å¾—ç»„ä»¶çš„æŠ½è±¡èƒ½åŠ›ä¹Ÿå¾—åˆ°æå‡ï¼Œå¹¶ä¸”å¯ä»¥é€‚é… DOM ä»¥å¤–çš„æ¸²æŸ“ç›®æ ‡ã€‚è¿™ä¸€ç‚¹æ˜¯å€Ÿé‰´ React æ¯«æ— äº‰è®®

å°¤å¤§ï¼šè‡³äºæœ‰äººè§‰å¾—é—¨æ§›ä½æ˜¯ low çš„è¡¨ç°ï¼Œæˆ‘åªèƒ½è¯´æ¬¢è¿ä½ ç”¨æ±‡ç¼–å»å†™å‰ç«¯ï¼Œæ²¡äººæ‹¦ç€ä½ ã€‚Â¯\_(ãƒ„)_/Â¯



#### è™šæ‹Ÿdomç°çŠ¶

ä¸ºä»€ä¹ˆç°åœ¨æœ‰éƒ¨åˆ†æ¡†æ¶å¼€å§‹æ‘’å¼ƒè™šæ‹Ÿdomï¼Ÿ

ä¸Šæ–¹Pete Huntåœ¨å£å—¨ä¹‹åé©¬ä¸Šåšå‡ºäº†æ¾„æ¸…ï¼š

> Reactä¸æ˜¯é­”æ³•ã€‚å°±åƒä½ å¯ä»¥ä½¿ç”¨ C è¿›å…¥æ±‡ç¼–ç¨‹åºå¹¶å‡»è´¥ C ç¼–è¯‘å™¨ä¸€æ ·ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥è¿›å…¥åŸå§‹ DOM æ“ä½œå’Œ DOM API è°ƒç”¨å¹¶å‡»è´¥ Reactã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ C æˆ– Java æˆ– JavaScript æ˜¯æ€§èƒ½çš„ä¸€ä¸ªæ•°é‡çº§æ”¹è¿›ï¼Œå› ä¸ºæ‚¨ä¸å¿…æ‹…å¿ƒ......å…³äºå¹³å°çš„ç»†èŠ‚ã€‚ä½¿ç”¨ Reactï¼Œæ‚¨å¯ä»¥æ„å»ºåº”ç”¨ç¨‹åºï¼Œç”šè‡³ä¸è€ƒè™‘æ€§èƒ½ï¼Œé»˜è®¤çŠ¶æ€å¾ˆå¿«ã€‚



æˆ‘ä»¬è¦å…ˆç›´è§†è™šæ‹Ÿdomçš„ç¼ºç‚¹

- é¦–æ¬¡æ¸²æŸ“å¤§é‡ DOM æ—¶ï¼Œç”±äºå¤šäº†ä¸€å±‚è™šæ‹Ÿ DOM çš„è®¡ç®—ï¼Œä¼šæ¯” innerHTML æ’å…¥æ…¢ã€‚
- è™šæ‹Ÿ DOM éœ€è¦åœ¨å†…å­˜ä¸­çš„ç»´æŠ¤ä¸€ä»½ DOM çš„å‰¯æœ¬ã€‚
- å¦‚æœè™šæ‹Ÿ DOM å¤§é‡æ›´æ”¹ï¼Œè¿™æ˜¯åˆé€‚çš„ã€‚ä½†æ˜¯å•ä¸€çš„ï¼Œé¢‘ç¹çš„æ›´æ–°çš„è¯ï¼Œè™šæ‹Ÿ DOM å°†ä¼šèŠ±è´¹æ›´å¤šçš„æ—¶é—´å¤„ç†è®¡ç®—çš„å·¥ä½œã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ª DOM èŠ‚ç‚¹ç›¸å¯¹è¾ƒå°‘é¡µé¢ï¼Œç”¨è™šæ‹Ÿ DOMï¼Œå®ƒå®é™…ä¸Šæœ‰å¯èƒ½ä¼šæ›´æ…¢ã€‚ä½†å¯¹äºå¤§å¤šæ•°å•é¡µé¢åº”ç”¨ï¼Œè¿™åº”è¯¥éƒ½ä¼šæ›´å¿«ã€‚



å¹¶ä¸”ç‰¹åˆ«æ˜¯å½“é¡¹ç›®å¤§èµ·æ¥ï¼ŒèŠ‚ç‚¹å¤šèµ·æ¥ä¹‹åï¼Œåœ¨è¿›è¡Œå¯¹æ¯”å’Œè®¡ç®—æ—¶ï¼Œç”Ÿæˆè™šæ‹Ÿä¸€é¢—domæ ‘çš„å¼€é”€æ˜¯å¾ˆå¤§çš„ï¼Œå°½ç®¡ç°ä»£æ¡†æ¶å¯¹æ­¤è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†ä»ç„¶æœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€ã€‚

å½“ç„¶æœ‰äº›ä¼ä¸šï¼Œæ¯”å¦‚è¯´Uberï¼Œé€šè¿‡å¹¿æ³›ä½¿ç”¨shouldComponentUpdate æ¥æœ€å¤§é™åº¦åœ°å‡å°‘å¯¹æ¸²æŸ“çš„è°ƒç”¨ï¼Œè¯¦æƒ…å¯ä»¥çœ‹[è¿™é‡Œ](https://www.uber.com/en-HK/blog/m-uber/)

react 16åé¢ç”šè‡³æ¨å‡ºäº†react fiberæ¥é¿å…å¯¹ä¸»è¿›ç¨‹çš„é˜»å¡

è€Œå°¤é›¨æºªåœ¨ã€ŠVue3çš„è®¾è®¡ã€‹ä¹ŸæåŠåˆ°äº†è‡´åŠ›äºå¯»æ‰¾å¯¹è™šæ‹Ÿdomç“¶é¢ˆçš„çªç ´ï¼Œæ‰“ç ´è¿™ç§çœ‹èµ·æ¥æ¯”è¾ƒé‡è›®çš„ç®—æ³•æ¯”è¾ƒæ¨¡å¼

> The framework figures out which parts of the actual DOM to update by recursively walking two virtual DOM trees and comparing every property on every node. This somewhat brute-force algorithm is generally pretty quick, thanks to the advanced optimizations performed by modern JavaScript engines, but updates still involve a lot of unnecessary CPU work. 





![](/å‰ç«¯æ¡†æ¶å°è§£/jie2.jpeg)

æˆ‘ä»¬éœ€è¦æ¸…æ¥šçš„æ˜¯ï¼Œè™šæ‹Ÿ DOM å’Œ Diff ç®—æ³•çš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³ç”±å‘½ä»¤å¼ç¼–ç¨‹è½¬å˜ä¸ºå£°æ˜å¼ç¼–ç¨‹ï¼ˆè®©ä½ çš„ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ï¼‰ã€æ•°æ®é©±åŠ¨åæ‰€å¸¦æ¥çš„æ€§èƒ½é—®é¢˜çš„ã€‚æ¢å¥è¯è¯´ï¼Œ**ç›´æ¥æ“ä½œ DOM çš„æ€§èƒ½å¹¶ä¸ä¼šä½äºè™šæ‹Ÿ DOM å’Œ Diff ç®—æ³•ï¼Œç”šè‡³è¿˜ä¼šä¼˜äºã€‚**



ç°é˜¶æ®µæ¡†æ¶ï¼š

- Vue3ä¾ç„¶ä¿ç•™äº†è™šæ‹Ÿdomï¼Œç€é‡äºå¯¹è™šæ‹Ÿdomçš„diffç®—æ³•ä¼˜åŒ–
- Infernoä½¿ç”¨Virtual DOM
- svelteæ— Virtual DOM
- solidjsæ— Virtual DOM



#### Vueçš„**å¸¦ç¼–è¯‘æ—¶ä¿¡æ¯çš„è™šæ‹Ÿ DOM**

è™šæ‹Ÿ DOM åœ¨ React å’Œå¤§å¤šæ•°å…¶ä»–å®ç°ä¸­éƒ½æ˜¯çº¯è¿è¡Œæ—¶çš„ï¼šæ›´æ–°ç®—æ³•æ— æ³•é¢„çŸ¥æ–°çš„è™šæ‹Ÿ DOM æ ‘ä¼šæ˜¯æ€æ ·ï¼Œå› æ­¤å®ƒæ€»æ˜¯éœ€è¦éå†æ•´æ£µæ ‘ã€æ¯”è¾ƒæ¯ä¸ª vnode ä¸Š props çš„åŒºåˆ«æ¥ç¡®ä¿æ­£ç¡®æ€§ã€‚å¦å¤–ï¼Œå³ä½¿ä¸€æ£µæ ‘çš„æŸä¸ªéƒ¨åˆ†ä»æœªæ”¹å˜ï¼Œè¿˜æ˜¯ä¼šåœ¨æ¯æ¬¡é‡æ¸²æŸ“æ—¶åˆ›å»ºæ–°çš„ vnodeï¼Œå¸¦æ¥äº†å¤§é‡ä¸å¿…è¦çš„å†…å­˜å‹åŠ›ã€‚è¿™ä¹Ÿæ˜¯è™šæ‹Ÿ DOM æœ€å—è¯Ÿç—…çš„åœ°æ–¹ä¹‹ä¸€ï¼šè¿™ç§æœ‰ç‚¹æš´åŠ›çš„æ›´æ–°è¿‡ç¨‹é€šè¿‡ç‰ºç‰²æ•ˆç‡æ¥æ¢å–å£°æ˜å¼çš„å†™æ³•å’Œæœ€ç»ˆçš„æ­£ç¡®æ€§ã€‚

ä½†å®é™…ä¸Šæˆ‘ä»¬å¹¶ä¸éœ€è¦è¿™æ ·ã€‚åœ¨ Vue ä¸­ï¼Œæ¡†æ¶åŒæ—¶æ§åˆ¶ç€ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥ä¸ºç´§å¯†è€¦åˆçš„æ¨¡æ¿æ¸²æŸ“å™¨åº”ç”¨è®¸å¤šç¼–è¯‘æ—¶ä¼˜åŒ–ã€‚ç¼–è¯‘å™¨å¯ä»¥é™æ€åˆ†ææ¨¡æ¿å¹¶åœ¨ç”Ÿæˆçš„ä»£ç ä¸­ç•™ä¸‹æ ‡è®°ï¼Œä½¿å¾—è¿è¡Œæ—¶å°½å¯èƒ½åœ°èµ°æ·å¾„ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬ä»æ—§ä¿ç•™äº†è¾¹ç•Œæƒ…å†µæ—¶ç”¨æˆ·æƒ³è¦ä½¿ç”¨åº•å±‚æ¸²æŸ“å‡½æ•°çš„èƒ½åŠ›ã€‚æˆ‘ä»¬ç§°è¿™ç§æ··åˆè§£å†³æ–¹æ¡ˆä¸º**å¸¦ç¼–è¯‘æ—¶ä¿¡æ¯çš„è™šæ‹Ÿ DOM**ã€‚

- é™æ€æå‡ï¼Œå…¶å®å°±æ˜¯ç¼–è¯‘æ—¶ï¼Œæ ¹æ®elementæ˜¯å¦å¸¦æœ‰â€œçŠ¶æ€â€ï¼Œæ¥ç”Ÿæˆvnodeï¼Œå¦‚æœæ˜¯çº¯é™æ€å…ƒç´ ï¼Œå°±æ˜¯ç”Ÿæˆé™æ€ vnode

  ```html
  <div>
    <div>foo</div> <!-- éœ€æå‡ -->
    <div>bar</div> <!-- éœ€æå‡ -->
    <div>{{ dynamic }}</div>
  </div>
  ```

- æ›´æ–°ç±»å‹æ ‡è®°ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ç¼–è¯‘æ—¶ä¼šå°†å…ƒç´ æ ‡ç­¾æºå¸¦ä¿¡æ¯å¸¦å…¥vnodeï¼Œæ¯ä¸ªvnodeä¼šæœ‰è‡ªå·±çš„ä¸€ä¸ªä¸€ä¸ªpatch Flagï¼Œç„¶åå°†æºå¸¦ä¿¡æ¯ï¼ˆæ¯”å¦‚classã€idã€valueç­‰ï¼‰é€šè¿‡æ›´æ–°ç±»å‹æ ‡è®°å’Œä¿¡æ¯è¿›è¡Œä½è¿ç®—æ¥åˆ¤æ–­æ›´æ–°

- æ ‘ç»“æ„æ‰“å¹³ï¼Œé’ˆå¯¹æ™®é€šçš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚ä¸å¸¦v-ifã€v-forè¿™ç§ï¼Œå¯ä»¥è¢«ç§°ä¸ºä¸€ä¸ªç¨³å®šåŒºå—ï¼Œæ­¤æ—¶ä¼šè¢«æ ‡è®°æˆä¸€ä¸ª

  ```js
  export function render() {
    return (_openBlock(), _createElementBlock(_Fragment, null, [
      /* children */
    ], 64 /* STABLE_FRAGMENT */))
  }
  ```

  ç¼–è¯‘çš„ç»“æœä¼šè¢«æ‰“å¹³ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œä»…åŒ…å«æ‰€æœ‰åŠ¨æ€çš„åä»£èŠ‚ç‚¹ï¼Œå½“è¿™ä¸ªç»„ä»¶éœ€è¦é‡æ¸²æŸ“æ—¶ï¼Œåªéœ€è¦éå†è¿™ä¸ªæ‰“å¹³çš„æ ‘è€Œéæ•´æ£µæ ‘

- å¯¹ SSR æ¿€æ´»çš„å½±å“

  æ›´æ–°ç±»å‹æ ‡è®°å’Œæ ‘ç»“æ„æ‰“å¹³éƒ½å¤§å¤§æå‡äº† Vue [SSR æ¿€æ´»](https://cn.vuejs.org/guide/scaling-up/ssr.html#client-hydration)çš„æ€§èƒ½è¡¨ç°ï¼š

  - å•ä¸ªå…ƒç´ çš„æ¿€æ´»å¯ä»¥åŸºäºç›¸åº” vnode çš„æ›´æ–°ç±»å‹æ ‡è®°èµ°æ›´å¿«çš„æ·å¾„ã€‚
  - åœ¨æ¿€æ´»æ—¶åªæœ‰åŒºå—èŠ‚ç‚¹å’Œå…¶åŠ¨æ€å­èŠ‚ç‚¹éœ€è¦è¢«éå†ï¼Œè¿™åœ¨æ¨¡æ¿å±‚é¢ä¸Šå®ç°æ›´é«˜æ•ˆçš„éƒ¨åˆ†æ¿€æ´»ã€‚





#### å¤§ä½¬ä»¬å¯¹è™šæ‹Ÿdomçš„è¯„ä»·

##### [å°¤å¤§å †è™šæ‹Ÿdomçš„è¯„ä»·](https://www.zhihu.com/question/31809713/answer/53544875)

[æ— è™šæ‹Ÿ DOM ç‰ˆ Vue å³å°†åˆ°æ¥](https://juejin.cn/post/7109676524550553630)

[å°¤é›¨æºªå‰ç«¯è¶‹åŠ¿2022 çš„ä¸»é¢˜æ¼”è®²](https://www.bilibili.com/video/BV1Rr4y1L7r3/?vd_source=a7271fb5733d8e87b30bac4ea32a461f)

[State of Vue 2022 - å°¤é›¨æºª](https://www.bilibili.com/video/BV12S4y1e7pn/?p=1&share_medium=android&share_plat=android&share_session_id=4e2c7597-7fa7-4e0a-a098-5e0aa675b035&share_source=WEIXIN&share_tag=s_i&timestamp=1655041421&unique_k=nLvKgzv&vd_source=3490d817b36fc42ec9a252b6cd0d6baf)

ä¸€èˆ¬æ¥è¯´ï¼š

åˆå§‹æ¸²æŸ“ï¼šVirtual DOM > è„æ£€æŸ¥ >= ä¾èµ–æ”¶é›†

å°é‡æ•°æ®æ›´æ–°ï¼šä¾èµ–æ”¶é›† >> Virtual DOM + ä¼˜åŒ– > è„æ£€æŸ¥ï¼ˆæ— æ³•ä¼˜åŒ–ï¼‰ > Virtual DOM æ— ä¼˜åŒ–

å¤§é‡æ•°æ®æ›´æ–°ï¼šè„æ£€æŸ¥ + ä¼˜åŒ– >= ä¾èµ–æ”¶é›† + ä¼˜åŒ– > Virtual DOMï¼ˆæ— æ³•/æ— éœ€ä¼˜åŒ–ï¼‰>> MVVM æ— ä¼˜åŒ–



é™¤äº†dom diffæ£€æŸ¥æ›´æ–°ï¼Œè¿˜æœ‰å…¶ä»–é©±åŠ¨æ•°æ®æ›´æ–°çš„å½¢å¼

æ¯”å¦‚Angularçš„è„æ£€æŸ¥ï¼ŒVueçš„è‡ªåŠ¨ä¾èµ–æ”¶é›†



æ›´æ–°ç²’åº¦

**åº”ç”¨çº§**ï¼šæœ‰çŠ¶æ€æ”¹å˜ï¼Œå°±æ›´æ–°æ•´ä¸ªåº”ç”¨ï¼Œç”Ÿæˆæ–°çš„è™šæ‹ŸDomæ ‘ï¼Œä¸æ—§æ ‘è¿›è¡Œ`Diff`ï¼ˆä»£è¡¨ä½œï¼šReactï¼Œå½“ç„¶äº†ï¼Œç°åœ¨å®ƒçš„è™šæ‹ŸDomå·²å‡çº§ä¸ºäº†`Fiber`ï¼‰ã€‚

**ç»„ä»¶çº§**ï¼šä¸ä¸Šæ–¹ç±»ä¼¼ï¼Œåªä¸è¿‡ç²’åº¦å°äº†ä¸€ä¸ªç­‰çº§ï¼ˆä»£è¡¨ä½œï¼š`vuev2`åŠä¹‹åçš„ç‰ˆæœ¬ï¼‰ã€‚

**èŠ‚ç‚¹çº§**ï¼šçŠ¶æ€æ›´æ–°ç›´æ¥ä¸å…·ä½“çš„æ›´æ–°èŠ‚ç‚¹çš„æ“ä½œç»‘å®šï¼ˆä»£è¡¨ä½œ`vue1.x`ã€`Svelte`ã€`SolidJS`ï¼‰ã€‚



##### [solidjsä½œè€…å¯¹è™šæ‹Ÿdomè¯„ä»·](https://betterprogramming.pub/the-fastest-way-to-render-the-dom-e3b226b15ca3)

é‡Œé¢å‚æ‚äº†solidjsç›¸å¯¹å®¢è§‚çš„ï¼Œå°†å¸‚é¢ä¸Šæœ€å¿«çš„å‡ ä¸ªè™šæ‹Ÿdomåº“å’Œè‡ªå·±çš„solidjsç³»åˆ—äº§å“è¿›è¡Œå¯¹æ¯”

é’ˆå¯¹å“åº”å¼å‰ç«¯æ¡†æ¶ï¼Œè™šæ‹Ÿdomä¸€å®šæ…¢å—ï¼Ÿå½“ç„¶ä¹Ÿä¸æ˜¯

è¿™è¾¹[Ryan Carniato](https://ryansolid.medium.com/?source=post_page-----e3b226b15ca3--------------------------------)é’ˆå¯¹ä»–è‡ªå·±çš„å¯¹æ¯”ç»“æœï¼Œç»™äº†å‡ ä¸ªå»ºè®®ï¼ˆæ ¹æ®æ¨¡ç‰ˆï¼Œä½œè€…åœ¨[å®˜ç½‘](https://www.solidjs.com/guides/rendering)ä¹Ÿä»‹ç»äº†ä¸‰ç§æ¸²æŸ“æ¨¡å¼ï¼šSolid æ”¯æŒ JSXã€æ ‡ç­¾æ¨¡æ¿å­—é¢é‡ å’Œ Solid HyperScript å˜ä½“è¿™ 3 ç§æ¨¡æ¿å½¢å¼ï¼‰



> å¦‚æœæ‚¨éœ€è¦æˆ–å–œæ¬¢åœ¨éç¼–è¯‘ç¯å¢ƒä¸­ä½¿ç”¨ Solidï¼Œä¾‹å¦‚çº¯ HTML æ–‡ä»¶ã€[https://codepen.io](https://codepen.io/) ç­‰ï¼Œæ‚¨å¯ä»¥åœ¨æ™®é€šçš„ JavaScript ä¸­ä½¿ç”¨ [`html``` Tagged Template Literals](https://github.com/solidjs/solid/tree/main/packages/solid/html) æˆ– [HyperScript `h()` functions](https://github.com/solidjs/solid/tree/main/packages/solid/h)ï¼Œè€Œä¸æ˜¯ Solid çš„ç¼–è¯‘æ—¶ä¼˜åŒ–çš„ JSX è¯­æ³•ã€‚



1. HyperScriptæƒ…å†µï¼ˆinferno, ivi, solid-hå¯¹æ¯”ï¼‰

   HyperScript æ˜¯ä¸€ç§å°†è§†å›¾è¡¨ç¤ºä¸ºå‡½æ•°ç»„åˆçš„æ–¹å¼ï¼ˆé€šå¸¸æ˜¯ h æˆ– React.createElementï¼‰ï¼Œä¸€èˆ¬æ˜¯æ˜¯è™šæ‹Ÿ DOM åº“æ‹¥æœ‰çš„ç±»åˆ«ã€‚ä¾‹å¦‚ï¼š

   ```js
   h('div', {id: 'my-element'}, [
     h('span', 'Hello'),
     h('span', 'John')
   ])
   ```

   ç»†ç²’åº¦æ–¹æ¡ˆï¼ˆFine-Grained ï¼‰å¯ä»¥åœ¨æ›´æ–°ä¸­è¡¨ç°æ›´å¥½ï¼Œä½†æ˜¯åˆ›å»ºååº”å¼ï¼ˆ reactive graphï¼‰å¼€é”€ä¹Ÿä¼šå¯¹åº”äº§ç”Ÿï¼Œé’ˆå¯¹è‰¯å¥½çš„diffç®—æ³•ï¼Œæ¯”å¦‚Infernoï¼Œè™šæ‹Ÿdomæ€§èƒ½ä¹Ÿèƒ½è¡¨ç°å¾—å¾ˆå¥½ï¼Œç”šè‡³æ›´å¥½

   æ‰€ä»¥å¦‚æœä½¿ç”¨HyperScriptï¼Œæœ€å¥½ç”¨è™šæ‹Ÿdom

2. å­—ç¬¦ä¸²æ¨¡ç‰ˆæƒ…å†µï¼ˆéè™šæ‹Ÿdomè¿›è¡Œæ¸²æŸ“ï¼‰ï¼ˆdomc, lit-html, solid-lit å¯¹æ¯”ï¼‰

   DomC å’Œ lit-html åšè‡ªä¸Šè€Œä¸‹çš„å·®å¼‚ç±»ä¼¼äºè™šæ‹Ÿ DOMï¼Œè€Œ Solid ä½¿ç”¨ç»†ç²’åº¦çš„ååº”å¼å›¾ï¼ˆreactive graphï¼‰ï¼Œå…¶ç»“æœæ˜¯è™šæ‹Ÿdomåº“å’Œsolid-litä¹Ÿç›¸å·®æ— å‡ 

3. jsxæƒ…å†µï¼ˆsolid, solid-signals, surplusï¼‰

   solidå¯èƒ½åœ¨æ­¤ç•¥èƒœä¸€ç­¹

ç»“è®º
åƒå¾€å¸¸ä¸€æ ·ï¼Œè¿™äº›æ¯”è¾ƒçš„ç»“æœæ°¸è¿œä¸ä¼šæ˜¯å†³å®šæ€§çš„ã€‚é‡è¦çš„æ˜¯æ—…ç¨‹ä»¥åŠæˆ‘ä»¬åœ¨æ­¤è¿‡ç¨‹ä¸­å­¦åˆ°çš„ä¸œè¥¿ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çœ‹åˆ° DOM æœ¬èº«æ˜¯æ€§èƒ½å‰æ²¿çš„æœ€å¤§ç“¶é¢ˆã€‚å¦‚æ­¤ä¹‹å¤šï¼Œä»¥è‡³äºæ²¡æœ‰æ˜ç¡®çš„æœ€ä½³æŠ€æœ¯ã€‚

> æˆ‘æ‰¿è®¤ï¼Œæ­£æ˜¯ React å¯¹è™šæ‹Ÿ DOM æ€§èƒ½çš„è¨€è®ºé¦–å…ˆå°†æˆ‘å¸¦å…¥äº†è¿™ä¸ªé¢†åŸŸã€‚å¯¹æ„è§çš„æ— çŸ¥ä»¤äººæ„¤æ€’ã€‚
>
> åŒæ ·ï¼Œæœ€è¿‘åˆå”±çš„â€œè™šæ‹ŸDOMå¾ˆæ…¢â€ä¹ŸåŒæ ·ä¿¡æ¯ä¸è¶³ã€‚ä¸ä¸è¿™æ ·åšç›¸æ¯”ï¼Œæ¸²æŸ“è™šæ‹Ÿ DOM æ ‘å¹¶å¯¹å…¶è¿›è¡Œå·®å¼‚å°†æ˜¯çº¯ç²¹çš„å¼€é”€ï¼Œä½†ä¸è¿™æ ·åšä¼šæ‰©å±•å—ï¼Ÿå¦‚æœæ‚¨å¿…é¡»å¤„ç†æ•°æ®å¿«ç…§æ€ä¹ˆåŠï¼Ÿ



##### [svelteå¯¹è™šæ‹Ÿdomçš„è¯„ä»·](https://svelte.dev/blog/virtual-dom-is-pure-overhead)

> Virtual DOM is pure overhead     ----------[RICH HARRIS](https://twitter.com/Rich_Harris)

ä»–é‡Œé¢ä¹Ÿæåˆ°äº†ï¼Œå³ä½¿ä¸ç”¨è™šæ‹Ÿdomï¼Œä¹Ÿèƒ½å®ç°å‡½æ•°å¼ç¼–ç¨‹

In many frameworks, you build an app by creating `render()` functions, like this simple [React](https://reactjs.org/) component:

```jsx
function HelloMessage(props) {
	return <div className="greeting">Hello {props.name}</div>;
}
```

You can do the same thing without JSX...

```js
function HelloMessage(props) {
	return React.createElement('div', { className: 'greeting' }, 'Hello ', props.name);
}
```

å¹¶ä¸” å“ˆé‡Œæ–¯ åœ¨  **So... is the virtual DOM *slow*? ** ä¹ŸæåŠäº†å‡ ä¸ªæƒ…å†µï¼Œå°±æ˜¯ç»„ä»¶å†…è§¦å‘æ¸²æŸ“é¢‘ç‡è¾ƒé«˜çš„å†™æ³•å’Œé—®é¢˜ï¼ˆé€šè¿‡ä¼ å…¥çš„propsï¼Œæ¥å†³å®šæ¸²æŸ“å†…éƒ¨çš„åˆ—è¡¨uiï¼‰ï¼Œæ›´å¤šçš„é‡æ–°æ¸²æŸ“å¸¦æ¥çš„æ˜¯æ›´å¤šçš„diffç´¯ç§¯çš„æ€§èƒ½é—®é¢˜

![](/å‰ç«¯æ¡†æ¶å°è§£/jie3.png)

å¹¶ä¸”è¡¨ç¤ºè™šæ‹Ÿdomåªæ˜¯ä¸ºäº†å½“åˆReactæƒ³è¦ä»¥çŠ¶æ€é©±åŠ¨uiå¼€å‘çš„ä¸€ç§æ‰‹æ³•è€Œå·²





## ç°ä»£jsæ¡†æ¶å¯¹æ¯”

[js-framework-benchmark](https://github.com/krausest/js-framework-benchmark)

[ç»“æœå…¬ç¤ºè¡¨](https://krausest.github.io/js-framework-benchmark/current.html)

[JavaScript Frameworks, Performance Comparison](https://medium.com/@ajmeyghani/javascript-frameworks-performance-comparison-c566d19ab65b)

è¯¥å¯¹æ¯”ä»¥ä½œè€…æœ¬èº«è®¾å¤‡ä½œä¸ºæµ‹è¯•åŸºå‡†ï¼š

- MacBook Pro (Retina, 15-inch, Mid 2015)
- Processor: 2.2 GHz Intel Core i7
- Memory: 16 GB 1600 MHz DDR3
- Graphics: Intel Iris Pro 1536 MB
- Browser: Google Chrome, Version 69.0.3497.100

å¹¶ä¸”ä¸»è¦ä»¥ä»¥ä¸‹3ä¸ªç»´åº¦è¿›è¡Œpk

1. DOM Manipulationï¼ˆdomæ“ä½œæ—¶é—´ï¼‰
2. Startup Timeï¼ˆå¯åŠ¨æ—¶é—´ï¼‰
3. Memory Allocationï¼ˆå†…å­˜å ç”¨ï¼‰

æµ‹è¯•ç»“æœä¸€è§ˆ

åˆèµ›ï¼š

| æ¡†æ¶1      | æ¡†æ¶2         | DOM Manipulation | Startup Time | Memory Allocation | Score | Winner        |
| ---------- | ------------- | ---------------- | ------------ | ----------------- | ----- | ------------- |
| Elm0.19    | Angular6.1    | Angular6.1       | Elm0.19      | Elm0.19           | 2:1   | Elm0.19       |
| Choo6.13   | AngularJS1.74 | AngularJS1.74    | Choo6.13     | Choo6.13          | 2:1   | Choo6.13      |
| Mithril1.1 | Marionette4.0 | Marionette4.0    | Mithril1.1   | Marionette4.0     | 1:2   | Marionette4.0 |
| Ember3.3   | Aurelia1.3    | Aurelia1.3       | Aurelia1.3   | Aurelia1.3        | 0:3   | Aurelia1.3    |

| åº“1         | åº“2        | DOM Manipulation | Startup Time | Memory Allocation | Score |
| ----------- | ---------- | ---------------- | ------------ | ----------------- | ----- |
| React16     | Vue2.6     | Vue2.6           | Vue2.6       | Vue2.6            | 0:3   |
| Preact8.3   | Inferno5.6 | Inferno5.6       | Preact8.3    | Inferno5.6        | 1:2   |
| Svelte2.13  | Redom3.13  | Redom3.13        | Redom3.13    | Svelte2.13        | 1:2   |
| Maquette3.3 | Bobril8.11 | Bobril8.11       | Maquette3.3  | Maquette3.3       | 2:1   |

æ™‹çº§èµ›ï¼š

| æ¡†æ¶1         | æ¡†æ¶2         | DOM Manipulation | Startup Time  | Memory Allocation | Score |
| ------------- | ------------- | ---------------- | ------------- | ----------------- | ----- |
| Elm0.19       | Choo6.13      | Elm0.19          | Elm0.19       | Choo6.13          | 2:1   |
| Aurelia1.3    | Marionette4.0 | Marionette4.0    | Marionette4.0 | Marionette4.0     | 0:3   |
| Marionette4.0 | Elm0.19       | Marionette4.0    | Elm0.19       | Marionette4.0     | 2:1   |

| æ¡†æ¶1      | æ¡†æ¶2       | DOM Manipulation | Startup Time | Memory Allocation | Score |
| ---------- | ----------- | ---------------- | ------------ | ----------------- | ----- |
| Vue2.6     | Inferno5.6  | Inferno5.6       | Inferno5.6   | Inferno5.6        | 0:3   |
| Redom3.13  | Maquette3.3 | Redom3.13        | Redom3.13    | Maquette3.3       | 2:1   |
| Inferno5.6 | Redom3.13   | Inferno5.6       | Redom3.13    | Redom3.13         | 1:2   |

å†³æˆ˜ï¼š

| æ¡†æ¶1     | æ¡†æ¶2         | DOM Manipulation | Startup Time | Memory Allocation | Score |
| --------- | ------------- | ---------------- | ------------ | ----------------- | ----- |
| Redom3.13 | Marionette4.0 | Redom3.13        | Redom3.13    | Redom3.13         | 3:0   |

æœ€åæ˜¯å’Œå¤§é­”ç‹çš„å¯¹æ¯”

![](/å‰ç«¯æ¡†æ¶å°è§£/jie6.png)

![](/å‰ç«¯æ¡†æ¶å°è§£/jie7.png)

![](/å‰ç«¯æ¡†æ¶å°è§£/jie8.png)

è¿˜æ˜¯å¾—VanillaJSï¼ˆä¹Ÿå°±æ˜¯åŸç”Ÿjsï¼‰

- DOMæ“ä½œæ€§èƒ½æ–¹é¢åªæœ‰Infernoå¯ä»¥ä¸ä¹‹åŒ¹æ•Œ
- åœ¨å¯åŠ¨æ—¶é—´ï¼ŒSvelteï¼ŒRedomï¼ŒPreactï¼ŒElmå’ŒInfernoå¯ä»¥ä¸ä¹‹ç›¸åŒ¹é…
- å†…å­˜å ç”¨å…¨éƒ¨æŒ‚æ‰



## Angular

angularåœ¨æ¡†æ¶å¯¹æ¯”ä¸­ç»å¸¸ä¼šä¸Reactã€VueåŒºåˆ†å¼€ï¼Œå› ä¸ºå‰è€…æ˜¯frameworksï¼Œåè€…æ˜¯UI libraryï¼Œå…¶å®çœ‹ä»£ç å°±å¯ä»¥çœ‹å‡ºåŒºåˆ«ï¼Œæ¯”å¦‚Angularçš„ä»£ç 

å¹¶ä¸”è¿™é‡Œæœ‰ Angularå’ŒAngularJSçš„[åŒºåˆ†](https://juejin.cn/post/7193534826081681464)

```js
import { Component } from '@angular/core';

@Component({
  selector: 'app-root',                //ç»„ä»¶çš„ CSS å…ƒç´ é€‰æ‹©å™¨
  standalone: true,
  imports: [],
  template: `<h1>Hello world!</h1>`,  //ç»„ä»¶æ¨¡æ¿ æ¨¡ç‰ˆæœ¬èº« / æ¨¡ç‰ˆæ–‡ä»¶çš„ä½ç½®è·¯å¾„ï¼Œæ¯”å¦‚'./heroes.component.html'
  styleUrls: ['./app.component.css'], //ç»„ä»¶ç§æœ‰ CSS æ ·å¼è¡¨æ–‡ä»¶çš„ä½ç½®ã€‚
})
export class AppComponent {
  title = 'default';
}

```

å¹¶ä¸”è¿˜å¯ä»¥åœ¨å·¥ä½œåŒºè¾“å…¥ä¸€äº›å¿«æ·æŒ‡ä»¤åˆ›å»ºç»„ä»¶ï¼Œåƒè¿™æ ·

```shell
# åˆ›å»ºheroesç»„ä»¶
ng generate component heroes
```



è„æ£€æŸ¥ï¼š

åœ¨ä»£ç å±‚é¢ï¼ŒAngularæ ¹æœ¬ä¸ç›‘å¬æ•°æ®çš„å˜åŠ¨ï¼Œè€Œæ˜¯åœ¨æ°å½“çš„æ—¶æœºä»$rootScopeå¼€å§‹éå†æ‰€æœ‰$scopeï¼ˆæ¯ä¸ªç»„ä»¶åˆ›å»ºçš„æ›´æ”¹æ£€æµ‹å™¨ï¼‰ï¼Œæ£€æŸ¥å®ƒä»¬ä¸Šé¢çš„å±æ€§å€¼æ˜¯å¦æœ‰å˜åŒ–ï¼Œå¦‚æœæœ‰å˜åŒ–ï¼Œå°±ç”¨ä¸€ä¸ªå˜é‡dirtyè®°å½•ä¸ºtrueï¼Œå†æ¬¡è¿›è¡Œéå†ï¼Œå¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°æŸä¸€ä¸ªéå†å®Œæˆæ—¶ï¼Œè¿™äº›$scopeçš„å±æ€§å€¼éƒ½æ²¡æœ‰å˜åŒ–æ—¶ï¼Œç»“æŸéå†ã€‚

è¿™ä¸ªæ—¶æœºåœ¨äº

- ä»»ä½•æµè§ˆå™¨äº‹ä»¶ï¼ˆå•å‡»ï¼Œé”®å…¥ç­‰ï¼‰
- `setInterval()` and `setTimeout()`
- HTTP è¯·æ±‚

æœ€åå®ƒå°†åœ¨ UI ä¸­é‡æ–°å‘ˆç°å€¼ã€‚ç”±äºä½¿ç”¨äº†ä¸€ä¸ªdirtyå˜é‡ä½œä¸ºè®°å½•ï¼Œå› æ­¤è¢«ç§°ä¸ºè„æ£€æŸ¥æœºåˆ¶ã€‚

ä½†æ˜¯ç¼ºç‚¹åœ¨äºï¼Œç”±äºæ•°æ®æ¨¡å‹ç°åœ¨æ²¡æœ‰ä»»ä½•å†…ç½®æ¢æµ‹å™¨å¯ä»¥å‘Šè¯‰æ¡†æ¶æœ‰å…³æ›´æ”¹çš„ä¿¡æ¯ï¼Œå› æ­¤æ¡†æ¶æ— æ³•æ·±å…¥äº†è§£å®ƒæ˜¯å¦ä»¥åŠåœ¨ä½•å¤„å‘ç”Ÿã€‚è¿™æ„å‘³ç€éœ€è¦æ£€æŸ¥æ¨¡å‹çš„å¤–éƒ¨æ›´æ”¹ï¼Œè€Œè¿™æ­£æ˜¯ Angular æ‰€åšçš„ï¼šæ¯æ¬¡å‘ç”Ÿä»»ä½•äº‹æƒ…æ—¶ï¼Œéƒ½ä¼šè¿è¡Œæ‰€æœ‰è§‚å¯Ÿå™¨ã€‚å•å‡»å¤„ç†ç¨‹åºã€HTTP å“åº”å¤„ç†å™¨å’Œè¶…æ—¶éƒ½ä¼šè§¦å‘æ‘˜è¦ï¼Œè¿™æ˜¯è´Ÿè´£è¿è¡Œè§‚å¯Ÿç¨‹åºçš„è¿›ç¨‹ã€‚



å½“ç„¶Angularçš„è„æ£€æŸ¥ä¹Ÿæœ‰ä»–è‡ªå·±çš„ä¼˜åŒ–ç­–ç•¥ï¼Œæ¯”å¦‚Change Detection Strategies å˜æ›´æ£€æµ‹ç­–ç•¥ï¼Œå˜åŒ–æ£€æµ‹åŒ…æ‹¬è„å€¼æ£€æµ‹ã€OnPushå˜åŒ–æ£€æµ‹ç­–ç•¥ã€æ‰‹åŠ¨è§¦å‘å˜åŒ–æ£€æµ‹ç­‰

è¯¦æƒ…å¯ä»¥è‡ªå·±å»æŸ¥çœ‹äº†è§£



ä¸è¿‡åé¢Angular æ­£åœ¨ç»å†ä¸€äº›åº•å±‚çš„å˜åŒ–ï¼Œå®ƒæ”¾å¼ƒäº†è„æ£€æŸ¥ï¼Œå¹¶å¼•å…¥äº†è‡ªå·±çš„å“åº”æ€§åŸºç¡€ç±»å‹å®ç°ã€‚



## Marionette

åŸºäºBackboneçš„å‰ç«¯æ¡†æ¶

#### Backbone

èµ·æ­¥äº2005å¹´çš„[jQuery](https://link.zhihu.com/?target=http%3A//jquery.com/)ä»…ä»…å¯¹DOMæ“ä½œè¿›è¡Œäº†åŸºç¡€æ€§çš„å°è£…ï¼Œæä¾›äº†å¯é“¾å¼è°ƒç”¨çš„å†™æ³•ã€æ›´åŠ å‹å¥½çš„Ajaxå‡½æ•°ã€å±è”½äº†æµè§ˆå™¨å…¼å®¹æ€§çš„å„ç±»é€‰æ‹©å™¨ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è§£å†³å‰ç«¯å¼€å‘ä¸­é€‰æ‹©å™¨æ»¥ç”¨ã€ä½œç”¨åŸŸç›¸äº’æ±¡æŸ“ã€ä»£ç å¤ç”¨åº¦ä½å†—ä½™åº¦é«˜ã€æ•°æ®å’Œäº‹ä»¶ç»‘å®šçƒ¦çç­‰ç—›ç‚¹ã€‚

ä¸ºæ­¤ï¼Œ2009å¹´æ¨ªç©ºå‡ºä¸–çš„[Angular](https://link.zhihu.com/?target=https%3A//angularjs.org/)æä¾›äº†ä¸€æ½å­è§£å†³æ–¹æ¡ˆï¼Œå¯¹æµè§ˆå™¨åŸç”Ÿäº‹ä»¶æœºåˆ¶è¿›è¡Œæ·±åº¦å°è£…çš„åŒæ—¶ï¼Œæä¾›äº†è·¯ç”±ã€åŒå‘ç»‘å®šã€æŒ‡ä»¤ç­‰ç°ä»£åŒ–å‰ç«¯æ¡†æ¶çš„ç‰¹æ€§ï¼Œä½†æ˜¯ä¹Ÿæ­£æ˜¯ç”±äºå…¶å°è£…çš„æŠ½è±¡ç¨‹åº¦å¤ªæ·±ï¼Œå­¦ä¹ æ›²çº¿ç›¸å¯¹é™¡å³­ï¼Œè€Œå¯¹äº`controller`å’Œ`$scope`çš„è¿‡åº¦å€šé‡ï¼Œä»¥åŠç…§æ¬Javaçš„MVCåˆ†å±‚æ€æƒ³è¯•å›¾é€šè¿‡`service`æ¥å®Œæˆé¡µé¢é€»è¾‘çš„å¤ç”¨ï¼Œå¹¶æœªå½»åº•è§£å†³å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸Šè¿°ç—›ç‚¹ã€‚

è¯ç”Ÿäº2010çš„[Backbone](https://link.zhihu.com/?target=http%3A//backbonejs.org/)åˆ™å¦è¾Ÿè¹Šå¾„ï¼Œé€šè¿‡ä¸[Undersocre](https://link.zhihu.com/?target=http%3A//underscorejs.org/)ã€[Require](https://link.zhihu.com/?target=http%3A//requirejs.org/)ã€[Handlebar](https://link.zhihu.com/?target=http%3A//handlebarsjs.com/)çš„æ•´åˆï¼Œä¸ºé‚£ä¸ªå¹´ä»£çš„å¼€å‘äººå‘˜æä¾›äº†Angularä¹‹å¤–ï¼Œä¸€ä¸ªæ›´åŠ è½»é‡å’Œå‹å¥½çš„å‰ç«¯å¼€å‘è§£å†³æ–¹æ¡ˆï¼Œå…¶è¯¸å¤šè®¾è®¡æ€æƒ³å¯¹äºåç»­çš„ç°ä»£åŒ–å‰ç«¯æ¡†æ¶å‘å±•èµ·åˆ°äº†ä¸¾è¶³è½»é‡çš„ä½œç”¨ã€‚

Backboneåº•å±‚ä¾èµ–underscore/lodashã€jQuery/Zepto



å®ƒæ˜¯ç¬¬ä¸€ä¸ªé€šè¿‡å®ç°[MVCæ¨¡å¼](https://link.juejin.cn/?target=https%3A%2F%2Fblog.codinghorror.com%2Funderstanding-model-view-controller%2F)å°†æ›´å¤šç»“æ„å¼•å…¥å‰ç«¯åº”ç”¨ç¨‹åºçš„æ¡†æ¶ä¹‹ä¸€ï¼Œåƒmvcæ¨¡å¼è¢«æ”¹æˆè¿™æ ·

![](/å‰ç«¯æ¡†æ¶å°è§£/jie5.png)

æ¯”å¦‚

- ä»è§†å›¾ç»„ä»¶åŒ–è¿™æ–¹é¢ï¼š

Backboneè§†å›¾å¯¹è±¡ï¼š

```js
/* Backboneè§†å›¾å¯¹è±¡ */
Backbone.View.extend({
  id: "app",
  template: '...',
  events: {
    "click .icon":          "open",
    "click .button.edit":   "openEditDialog",
    "click .button.delete": "destroy"
  },
  initialize: function() {
    this.listenTo(this.model, "change", this.render);
  },
  render: function() {
    this.$el.html(this.template());
    return this;
  }
});
```

Vueç»„ä»¶å¯¹è±¡ï¼š

```js
/* Vueç»„ä»¶å¯¹è±¡ */
import Vue from 'vue';
new Vue({
  template: '<div>æ¨¡æ¿å­—ç¬¦ä¸²<div>',
  data: {
    // ç»„ä»¶ç»‘å®šçš„æ•°æ®
  },
 
  methods: {
    myEvent() {
      // ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶
    },
  },
});
```

Reactç»„ä»¶å¯¹è±¡ï¼š

```js
/* Reactç»„ä»¶å¯¹è±¡ */
import React from 'react';
import ReactDOM from 'react-dom';
class MyComponent extends React.Component {
  constructor(props) {
    // ç»„ä»¶æ„é€ å‡½æ•°
  }
  myEvent(event) {
    event.preventDefault();
  }
  render() {
    return (
      // JSX
    );
  }
};
```

Angular2ç»„ä»¶å¯¹è±¡ï¼š

```ts
/* Angular2ç»„ä»¶å¯¹è±¡ */
import { Component, Input } from '@angular/core';
import { Demo } from './demo';
@Component({
  selector: 'demo-detail',
  template: `
    <div>æ¨¡æ¿å­—ç¬¦ä¸²</div>
  `
})
export class DemoDetailComponent {
  @Input() demo: Demo;
}
```

**æ„å»ºå•é¡µé¢åº”ç”¨**

Backboneå‡ºç°çš„å¹´ä»£ï¼ŒWebå•é¡µé¢åº”ç”¨å¼€å‘æ–¹å¼è¿˜æœªèƒ½æ™®åŠï¼ŒåŸºäºJSPæˆ–PHPç­‰æœåŠ¡å™¨æ ‡ç­¾çš„å‰åç«¯è€¦åˆå¼å¼€å‘è¿˜æ˜¯ä¸»æµï¼Œå› æ­¤Backboneå¯¹æ„å»ºå•é¡µé¢åº”ç”¨çš„æ”¯æŒè¿˜è¾ƒä¸ºè–„å¼±ï¼Œä¹Ÿé€ æˆ**åµŒå¥—è§†å›¾**å’Œ**åƒµå°¸è§†å›¾**ä¸¤å¤§é—®é¢˜é•¿æœŸå›°æ‰°ç€ç»§å¾€å¼€æ¥çš„Backboneå¼€å‘äººå‘˜ä»¬ã€‚ä¼´éšç§»åŠ¨äº’è”ç½‘çš„å¿«é€Ÿå´›èµ·ï¼Œå¯¹å•é¡µé¢åº”ç”¨äº¤äº’çš„éœ€æ±‚é‡è¶Šæ¥è¶Šå¤§ï¼Œè®¸å¤šå¼€å‘äººå‘˜åœ¨å®é™…å¼€å‘å®è·µè¿‡ç¨‹ä¸­ï¼Œé€æ­¥å¯¹`Backbone.Router`è¿›è¡Œå¢å¼ºï¼Œå…¶é—´è¯ç”Ÿäº†[backbone.routefilter](https://link.zhihu.com/?target=https%3A//github.com/boazsender/backbone.routefilter)å’Œ[backbone.subroute](https://link.zhihu.com/?target=https%3A//github.com/BackboneSubroute/backbone.subroute)ä¸¤æ¬¾ä¼˜ç§€çš„ç¬¬3æ–¹Backboneè·¯ç”±æ’ä»¶ï¼ŒåŸºæœ¬è§£å†³äº†**åƒµå°¸è§†å›¾**å¸è½½çš„ç—›ç‚¹ã€‚ä½†æ˜¯ä¼´éšWebå‰ç«¯äº¤äº’é€»è¾‘æ„ˆåŠ å¤æ‚ï¼Œ**åµŒå¥—è§†å›¾**çš„é—®é¢˜åˆå¼€å§‹é€æ­¥å‡¸æ˜¾ï¼Œè€Œ**åµŒå¥—è§†å›¾**ä¾ç„¶ä¸**è·¯ç”±æœºåˆ¶**å¯†åˆ‡ç›¸å…³ã€‚å› æ­¤ï¼Œ[Marionette](https://link.zhihu.com/?target=http%3A//marionettejs.com/)å’Œ[Thorax](https://link.zhihu.com/?target=https%3A//github.com/walmartlabs/thorax)ä¸¤æ¬¾åŸºäºBackboneçš„å•é¡µé¢å‰ç«¯æ¡†æ¶åº”è¿è€Œç”Ÿã€‚



#### MarionetteèƒŒæ™¯

èƒŒæ™¯ï¼šBackbone ä¸ºæˆ‘ä»¬çš„ JavaScript åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç»„å¾ˆæ£’çš„æ„å»ºå—ã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†æ„å»ºå°å‹åº”ç”¨ç¨‹åºã€ç»„ç»‡ jQuery DOM äº‹ä»¶æˆ–åˆ›å»ºæ”¯æŒç§»åŠ¨è®¾å¤‡å’Œå¤§è§„æ¨¡ä¼ä¸šéœ€æ±‚çš„å•é¡µåº”ç”¨ç¨‹åºæ‰€éœ€çš„æ ¸å¿ƒæ„é€ ã€‚ä½†Backboneå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ã€‚å®ƒæ˜¯ä¸€ç»„æ„å»ºå—ã€‚å®ƒå°†å¤§éƒ¨åˆ†åº”ç”¨ç¨‹åºè®¾è®¡ã€ä½“ç³»ç»“æ„å’Œå¯ä¼¸ç¼©æ€§ç•™ç»™å¼€å‘äººå‘˜ï¼ŒåŒ…æ‹¬å†…å­˜ç®¡ç†ã€è§†å›¾ç®¡ç†ç­‰ã€‚

Marionetteä¸ºBackboneå¸¦æ¥äº†åº”ç”¨ç¨‹åºæ¶æ„ï¼Œä»¥åŠå†…ç½®çš„è§†å›¾ç®¡ç†å’Œå†…å­˜ç®¡ç†ã€‚å®ƒè¢«è®¾è®¡ä¸ºä¸€ä¸ªè½»é‡çº§ä¸”çµæ´»çš„å·¥å…·åº“ï¼Œä½äº Backbone ä¹‹ä¸Šï¼Œä¸ºæ„å»ºå¯æ‰©å±•çš„åº”ç”¨ç¨‹åºæä¾›æ¡†æ¶ã€‚



## Redom

REï¼šDOM æ˜¯ä¸€ä¸ªç”± Juha Lindstedt å’Œè´¡çŒ®è€…è®¾è®¡çš„å°å‹ ï¼ˆ2 KBï¼‰ UI åº“ï¼Œå®ƒæ·»åŠ äº†ä¸€äº›æœ‰ç”¨çš„å¸®åŠ©ç¨‹åºæ¥åˆ›å»º DOM å…ƒç´ å¹¶ä½¿å®ƒä»¬ä¸æ•°æ®ä¿æŒåŒæ­¥ã€‚

å› ä¸º REï¼šDOM éå¸¸æ¥è¿‘é‡‘å±å¹¶ä¸”ä¸ä½¿ç”¨è™šæ‹Ÿ domï¼Œæ‰€ä»¥å®ƒå®é™…ä¸Šæ¯”å‡ ä¹æ‰€æœ‰åŸºäº Virtual dom çš„åº“ï¼ˆåŒ…æ‹¬ Reactï¼ˆåŸºå‡†æµ‹è¯•ï¼‰ï¼‰æ›´å¿«ï¼Œä½¿ç”¨æ›´å°‘çš„å†…å­˜ã€‚

ä½¿ç”¨ REï¼šDOM åˆ›å»ºå¯é‡ç”¨ç»„ä»¶ä¹Ÿå¾ˆå®¹æ˜“ã€‚

å¦ä¸€ä¸ªå¾ˆå¤§çš„å¥½å¤„æ˜¯ï¼Œä½ å¯ä»¥åªä½¿ç”¨çº¯JavaScriptï¼Œæ‰€ä»¥æ²¡æœ‰å¤æ‚çš„æ¨¡æ¿è¯­è¨€éœ€è¦å­¦ä¹ å’Œéº»çƒ¦ã€‚

åˆ›å»ºåŠ¨æ€åˆ—è¡¨

```js
import { el, list, mount } from "redom";

class Li {
    constructor() {
        this.el = el("li");
    }
    update(data) {
        this.el.textContent = "Item " + data;
    }
}

const ul = list("ul", Li);

mount(document.body, ul);

ul.update([1, 2, 3]);
ul.update([2, 2, 4]);
```



## VanillaJS

å¤§å®¶æœ‰å¿…è¦è®¤è¯†ä¸‹ä»–ï¼Œä»–æ—¶å¸¸å‡ºç°åœ¨å„æ¡†æ¶å¯¹æ¯”çš„æ¦œé¦–ä½ç½®ï¼Œè¿™æ˜¯ä»–çš„[å®˜ç½‘](http://vanilla-js.com/)

**PlainJS** a.k.a **VanillaJS**

æ²¡é”™ï¼Œæ‰€ä»¥å®é™…ä¸Šå®ƒå°±æ˜¯å‰ç«¯æ¡†æ¶æ¶è¶£å‘³ï¼šåŸç”Ÿjs



## å‚è€ƒ

[OSCON - React Architecture](https://speakerdeck.com/vjeux/oscon-react-architecture)

[ä» React å†å²çš„é•¿æ²³æ¥èŠå¦‚ä½•ç†è§£è™šæ‹Ÿ DOM](https://segmentfault.com/a/1190000021431311)

[çŸ¥ä¹ï¼šç½‘ä¸Šéƒ½è¯´æ“ä½œçœŸå® DOM æ…¢ï¼Œä½†æµ‹è¯•ç»“æœå´æ¯” React æ›´å¿«ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼ˆå°¤é›¨æºªç­”æ¡ˆï¼‰](https://www.zhihu.com/question/31809713/answer/53544875)

[å¯¹Infernoä½œè€…ä¸“è®¿](https://survivejs.com/blog/inferno-interview/)

[ä¸ºä»€ä¹ˆè®¤ä¸ºBackboneæ˜¯ç°ä»£å‰ç«¯æ¡†æ¶çš„åŸºçŸ³](https://zhuanlan.zhihu.com/p/30982369)

[å°¤é›¨æºªå‰ç«¯è¶‹åŠ¿2022 çš„ä¸»é¢˜æ¼”è®²](https://www.bilibili.com/video/BV1Rr4y1L7r3/?vd_source=a7271fb5733d8e87b30bac4ea32a461f)